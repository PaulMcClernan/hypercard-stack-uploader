<!DOCTYPE html><meta charset=UTF-8>
<!--base href="https://HCSimulator.com/"-->
<script src=script.js></script>
	<stack-part name='HCSim Demo Stack' width=640 height=800 script='on openStack

end openStack

on doMenu tMenuItem
If tMenuItem is "New Stack..." then
put "Answer File goes here"
exit deMenu
else ifÂ tMenuItem is "New Card"
pass doMenu
else
Answer "You picked "& tMenuItem
end if
end doMenu'>
	<background-part id=1 part=background showpict=false color='#a8c6fe' bitmap='data:image/gif;base64,R0lGODdhAAVABpEAAAAAAP///wAAAAAAACH5BAkAAAIALAAAAAAABUAGAAL/hI+py+0Po5y02ouz3rz7D4biSJbmiabqyrZuJcTyTNf2jef6zvf+DwwKh8Si8YhM4l7MpvMJjUqn1Kr1is1qt1Wl9wsOi8fksvl846rX7Lb7DY/L5/T6Go3P6/f8vt9rFyg4SFhoeIiYqHj31+j4CBkp+bNYaXmJmam5ydl5MgkaKjpKquR5ipqqusra6qpSGis7Sxv6eoubq7vL2xtXCxwsPAzma3yMnKy8zIxA/AwdLU3TXG19jZ2t/Tbd7f1Nui0+Tl5ufg4Drr7Orof+Dh8vP6/bbn+Pn0S/z9/v/08nn8CBBHMAPIgwocKFnwo6fJiPocSJFCtWhIgxIziL/xw7evxYTqPIkcRAmjyJMiUukixbxlIJM6bMmYdc2rwZiabOnTx7XsEJNOgen0SLGj0qQqjSpWOQOn0KNWoCplSrHpGKNavWmVa7evWxNazYsRS/mj1bg6zatWznoX17tq3cuXSvwb3bFVMAA3vr+v0LOALewUwP7Q1wuC+AvogXH14MObDkyWQJWw4qKDEDxhIeU/4MGunl0TbpeD7gmTNf1Y9Z8w0NO7ZM0rRJylHsOjJj3K97K/b9W3bb3asnEHcsnM3xxp2LI39RO3pGN6dzc/7Nurrz4KqTb01MnDkExOGDe68Cvrj4B+TVm08hPb7DNrl1+97eeLfm9d3Pk/8lD2B74zkWoID+XVEggBGAlyB08j0YERfrRaZba5oRiMCEFKbWG2rvDWLehwfqlaCC7JWo4YhRoGhgAyyKaAKEMtojYYbWdXgcgftR+BpzISLyooqeMFjggjoWKaQURAZoJIsuzAilOlpgd9+F7eUHmY9UOtBfhXVYiByKzs0Eo3FmLnfdcz5muVyWPK4oZmclvnlOmc01h2aPaqappZ6nKRnngnPamVSUhk6DRZperpnnjnS66CGdfyp35IsNxpQfoSemmIClnn56KZxMmgipk+9kygGpLoLK6qdTNKjqAkvGCsuhtj5jRXdrbrgjlql1eaEC2AXboRqztkorR/v/tWjBpSEiC22gTzB4pKAKJqvNspzKyaSk0X7bLRTUhsvlqMzWemu6wORq431qsrldmMLG+SNu2kkIrqkWHXuunJWaqF++0b4qbbn6ZvsvtuPxm53AAwM6p7UFw6duxbNQwRuvYaIK75XeBimrm6gVm2jCx5pMLkWZRtyspzY6DC3BB68K6zgrh1qBqx7CjKzME8s66JMWDx3OisCNvDFw6aWMcrciGmhvokX2bOlErLbs8s5XXrs1kTp+XbO4KEuMMzZX56zzalx3vfTa405t9MybyU0x0XZPYrSebLp2rbtvujppp5H+jR7D5pqMuNWDKgx00w3zfLaobEtcKTli/zJdruNKQw6qzzdTjmQLd4+e07Q46o1qeaHvrPm823L8qBNUb3w55gi5vfqmuP8psOM/MwHywr9bszvjnU496svf+s6yuHQDPXwJpE/fiOlHg7mse88d7/KEuc+NtPNV25ch89selLbuwWvducOxu7A+zVy/T3zWwo+vfPu9a4pC/HMfzr8PUG+AfMhb1K6DQGq5znApopuuIGYu2KnvebeDlfGYR7Jd8a177lIUBKtlJ/9tY3H94h7IuHOjvQUphYGTHdtaaMKyoYuANDRDEzQonq0lLXXcGZsOjzc2YeEogCJIH7eapjIjLvBzJdyhlTTHwz29Koj3g5vllBjDt/89LXuMWiEXcyQ2CmaxbyyooRnLADy/yUtkN2ugk+b3N23JsFhE/EAb/3UBCzZRiOSrTwv8iIEUckmNaGujwgCXKhFqQJAdWBKGqlgtjBEyjx0cEPny+MJDcnAD+PMAI1NVuT2yL5KiO6Mpi2E9HX4xabxa4buEuDK1kbJdLlQktwx5vkhFkWN1xCTtttcsJ57ol/STXwS32MkMIM92WBPmrpQpRvbNEXxF1BYwcybMzMWymP9bJjJtSQFvitI4u3ziIqOptugBkQOnbKcp/mil7OAHc93b5rxkubZ0buaaKUgmJklYxZhVU4/M7GbzelZIf4YyeY18oydbxU1jfs//oBeUph1JWFDoSQuh4cSiOGGItaA19Gq9TOc0l1hRk5b0AO5sqRFMF7VHAiyDVRtX43bZo5PCT5wRneBE8xezXHb0YWRzlkrBabD41XSlKLUnJ5fX01Fm9KhTTVhUm9q5W0YsYPZL6MyWetFlPvRhRDwmoRSK1auy1KVsDcIfO8hLnAIVoNi6Yyx/9VOmdpSKT0Wq+bCo1b+mVLAcJWcmocZAOyJxpFA9k0iT+rmi/lR+hBWqNDkXUn7p0q+OVadhG4unx0r0a5KtqjPaitoesCA8cFVh4M4moPeocrZOHCwJutpXXPoUXNB0X0B52zyt4k6lYNMrSiuX23wNNbgS/70gWndb2OYuj7m/veNCJchYQybSt8I1LTqf64DUilcHK3jgNpGEQlzO74dAjOtdaUfd/plVrdIt6DErO865MjSrkMUQ4Dg7Rt6GwJXJVW53Kwre1nmVjPw1pn/riU6sgnasog0kzz6r08tmNMEMGK+HbaACvsFLXq1pLwexFDKxtm1zGb4tgDFsXYoiz3zL3aq9dgdd5ZpWv4eNcI3jizY3lRij+fUagl9IshjO8sd9Iu5kqbo/20JZvZ5dcIsFJWQhE7TIICwykuk33wt8eMwyWO3pKkRPktrUdfCdcY+vTOEKF1inDh3ZR70MQMg+mbB8/ifDFlqCFxvpzAwU6v+fS3s+DtNsjTI2HtUg6mcfHs7FVTYToTHIHr7qmXGK7jCZx9zPIT6YQwFeKoph6SvWorfQlt2ubge8uPqWkMrj9CZ0+cnjPNu5eBaG6I5/jMfyTvmsl/staTVq1GA6OtayXm/5zNpqCb9RysINdoiHjWiQXvbY0u6SBD4N6lBLcW/XpLVRfaVR10aRlZELdKeXa21kL3mJ8aY3Q/trX2jnmNoaBmx2rbhafesOufse7Z7xDcl843jTcEY2pEdA4IAvPKkEZ3gTP5oBcH+4f4SOp8P157GQdaxtb9sTbgcaNlirk14WZ+aLFSnwMsV6pbZmOcqBLF+rFjzbjeZ3/mD/bLuY75bRmdUieiEuaFjrvOWaet67Pa1x8Z4gY7ElVr/Hl7pMo/iucDT3wV0d4zgDWdEA/Xh+ebzzA0fb7CcP631vKEbNhnC48v71/6ycS0H7uOdPxzu3dxo9uSe8rnTXQNTHK+5fsTKn0w25yHM6anJXfdhWB4G/e/tlGT9y8LN+udP3jkSab7niKK+3xCO76c0z/VmgNyjQCV9pbIuep1/HvOnL6zZj43lifV/A4aVuAuuUONf/FeWH3uuxrrkH5yp35M3pnPnqMi2CmZ33ts+uT7t3O/ZFB/i1Lx9m6ceR+5nzqvWPqvr7nf/1vWe/47/fdqmmtNjE98DvUxvo/+uB8eo6A9M+yzdPv5RncmZcbOdzTLd67sd6lUZl+DZY7WdSvpN+bsd8lgdt9qVpmscsGOdq/hJ4hSd92GdvpkZp5HdOxcNpGfhx6ceBG3B/qMVxi7J9EIZrAMgjqrNi5+V8j2eBrXdLxfVN9xaCC8g5c/R09Gd+o1d7eHeA+3ZnaeeALRJxc8ZdxBdASFhjeCRwzVeBvVZ8y1Zl4Rd69veCbOVu8UJHF+ZflrZ8DwaEJAY1/9eDPuiEMOJ5coOCVVhqaydWfoZxXRhkE/dvW0Z9LRdRwQOBBjhh9QdjE6h2jgSIeyWIYEdkhShrh6gviagAZWiGwSdLN1iEqcZF4f/DGzgYMG5ILHGIdLlXgHtoh2+HYUtWO2pogExGRo8YXWInhJh3QgqWYrkXgla1i4uEX8MDelM4hA83hyl3gljni6g2OcFIZPTVAJzoUrelN4qIUBaSPdkIgMp3isqHa1JIjU64jNHXbQqYjuU0bk1GhKjHeWtHeawmj8kIStOWhiuXSdnGaj3oTB7Xjk31d1FYjxAWf7zYcKVSO/nIfJPId/0oQNboTtiYZMVIg6Y4bn5iTcnHRPrBg+eYkOb4irHnT7bmicfYetRXdaNHgfnUjA25jwhINjTWhCY0dSrYbEmogyypi07lhxnmkK4YWCDXigAgkRNZRGc2j0HFROr/oWVoaGRIFld/522DuH7VB30zpo5KtoQIKWVYWIfbk4dFiYJeaU2XaIhz92oHGVLyFYlQFlX1pDU4GWlvGWDExHc5xk28JoFkeJSmlH9sFopLs4ZcV1sC2CvOxykZA5IhmZMyF5MzOX2aCDo7pkdZGFzTVo85+ZIHV3bN5YjSxj2JA3ZTF5m6x4dlmWsDaZYiqIjVFZrXZ1lf1YAd8JenlJTjN5h9qErsJk88pF3AeE/lSHGO+ZCGxn11ZoXBd4eQOISOeHmSSIfX1XRxB4StVmezWIDaZ4sPuI9q+ZlWuJk3NZ0m+ZwKGXZpCZc1aQC3CZi5yX9FuE6Kh2bXOTkA/6MlpaghjNmTrCmdwnmcuKiB49mdZcWAB3ln22me3eed6ZmOqJler7ZdbhmSPuZvCWqVB9icV7lYPsWCfOmC7mlGEPdsu4kzHOk1UgScT8mKokhLRSmeBUZ6FEV0DjZZlDlB/vmQ8ehyb6ag5cmKAiqT6kN60RlQzAmg50mQPUprg8idXXZqUPiaPBqh07lWIkpDAzaDtNiGv7mTo6aSOnhJgvN8t8ePZ8dZC3mcMLqcB1aDygOl4teVI/ikHSqloklszGU4lMim8fl6bzqXllhfM4qZc8qISpqXeSpDexqiWEpA8KluJgqn4uh1qFhcb5ge2oOkSdeXkImO3WSmrP9jgo9YqLXGluKpV6eKltVmfKfJmWNEqH+6igkphmtanZSpqnnZiK2qXYgqm03oqFmqpcNiovxxMoe5RuVUHm3Gbt84qyAIoQ3KjK7IqyDqdrG6o802f6pploDqoVVVq2k1mzCXiBJ6rV0JTg22pK4prrMHra63YRZ0pmuaccE6QFpqqwaWNYZJV3Y1W3g1YsSZo54VlezFjzuKnUZaoKk5rWhnW140nh3pc0E5pa+6KZEkW+VqpdrYne+jnQuro8NEsepXe0gFYF+WsZx6pfZKOsP6KMXqoyh6qXJEmCvKYKRmmrC1lJZZczuLfZXIrivIsC5Zd3YJpXWqsWmqj2H/eJk0aqgROKoCObTiWLSOeYHuarTxqah7prR96HDY+gAsSz0k+rL0SJRZtV7gSHL5ZFcjFqVcmIdg2ntxq5nyGIq+WpzDqIXcqa4KyFRqip7wWLXjmqQz+JMCNqQkq7eEeLhZ+4xM6K0F66kO+rVgSIdiOz34OizUCrPuJZU1u5Frm2pk+qxRZpem9oR1JJ8G97C/c4HeSlm9+p/GaVHxlWDKaYjfGrSYxboi+HmHBbugKrvkRJdFtXTUqpdbO1UEJWaYOzqWFz4Vaba7max9ArzASVv02U8tapCOUqCCVZG7SlS6GotpprKo6oeX2pkzx1UcuqDaqnWcmqCnmpLv/9qXrcm3LUqFbta+8Vq4HDtIfee8z6tYwzeQnWs/NcOvhomYpPV+m0qI5uaVkva04DO/nrl3FJRY+Bu+0eqkara8B9qUYelLFxzCJGmMj/u95ci8fOprGAyIQUrCEzDAd5ObEaqNCFwlACSKBct4mdqnq3e1b4uV2vlMFCaM96lnHNqmqwJCyfVKDFqnPwczCYi3dxeNdcm8t1i50gqTT/ySUcyE7Hm0iAvAd4rFggsBNWw3JHp8/YLAB9M3YQrEJ5O2AivF7eaFfzUmLsbHI3m6Flp5e9yTU8y5yoinz6m8tLtZiGSxB4tlBGqThUzGPgt+YPmai7yEbEw0Fhi97f/iPRapY48DsGo7x3XcrAEngVvnwlMZvIr1j6/sjleIPZYmyXzUiqOLXcqkPRDLyuW3ywq5eANyvmTKjgmLH5JYo4P0yneSy9gzyJRUW9NYlS8azb84zPEbe5w8NEm5uTb5jnEczjQrU2wbct77Av8axIvFn1/yydj0zpkBeNNsTmzYwaUbtPATz/a8znkjcfQsxoO2zyWofdxsMdDLkPfUQ153t6B8zJJHcup7y5ykRu28viGbJCLXH4BkLLF1z5PhRxyNLxpEAQZdMQi90ecymeJctkn8uTnoNP0sNZSb0adAxDWdGdoWtiadLtUEiiy4hiZGvZ4KX/r0jx4NR5b/gLs4bdN4zNRZoNPhxdO3gtDeOKMrTb2s08UvnZhOowkt/NRhTRdTTdWwHM0pE8xtZmDD6cRcV8fKashvUMxiTddFQda2gq98BFT0dsiOjNFUnJ9qnZjNHAgoW9eHXRl3bSiwrHobeMAPLNh+DXnY5Gyje10fDSJzjdibPRuKHSV5jcMOnbL7Ob5UeYX4VMvDNdFy7aqc7dpO4dmfXdULPdr7CZ39WB2nNrEds0NwuNr0sVWvLdywHdszYtYGPEpKxtcxml6jqTHE2ytOqbdAArzDbd12XdwyEpjfqNLWlyyYDMc5RNifmHUMTCKOe93pbRHZrd1m3UoL9LXKTcWT/zyXL9OMbotmMj3TWaze/R0T7A0hPs3W9V2i4d1AH8M73pPbykZMWXfeDevfEQ4SAP4gfuzc8m1R8E1Z9P2JWl1Ii6K9lzCyEk7iZUHh8VHVSRYrXOxagnPTHkms8zk4JbWisakIG1viOe4WJy4dAt7OKv3dWD28pt3cg0PZCPTXhJC2Ua3jTd4PPN7jZBu96KxCx1Xg3UjgyYo6ThmIOaLfUI2GTi7mDAHl0UGR9g2ny53hP5fmu3bhfdxL7jXmcy7hZV4bN0wl/MFtHpluGl3gL7rlIiPoQ4WXdG7o1m3ntAGp0KPmRo3hau7RHb55pEZsjIfZh47pT53opHHmNP/l4pOSOykKzuukS8464z0l55mu6py96aOBjQeU5dn36OyM5pLe2LyDNM+if0y+6r3uH61+GcImankO6h+qaVGaimmY61bdZGHu68+O08BuGW7MZhzu6GyO5sSq7bWe7DF1QFj+29Au7nUh7YSx3S7O3Z+u593NTzgbyihk6qTof/A+7vWuIuU+GKG27W2e3P3e5x5+69+8fz+kn/Zu8PeO73dx7oIOLO1udSwe3VlGSxW9JTCO5QeP8QeS8Arf6QC/4kBO2rAo6VJY5H2s5a9UzRmv8oGx8XBhZnRUbuMY8hhb6m5e85dW5b+c8ivP837R8m+ReDYP8GDD71xe6w7/z+0LmMw42/NNLxk/jxbXNkkMb+T2XfFC7/HjOOUlR+mX7vRfvxVQHxchluAKrvTWPtm2voFUl9zLCkxfDvZxnxJibxbwJO/X8+l5v7nPJN43WCVWDzsJLveDLxd0/xXprOAJXfQVZqx7X/W01aw9RPiTLxaG7xXihu5Vj/U1mnIP7/d+s2Iq6iVO3QlwT9FrYPqrkPpzsPqnDw+tX0qWXxVSX+2xDuRHNPSSou6oOPBxEO4bXvQYU8Hb+/u5wMgpLjn5TPywzwnHz9h+KfuFIeykDvqZZknGqtfvnCdR3Peo7/wU9+aFE9cQXCfjP6HMv4JQXcnGb/59RfrtGf1U/2Fmo0391q/hmk/IWydP3k+0s0odBBDEQJfbH8aDpEKpZr15dxfzRFAsO9JMIYpS3Slc25euM9SO8FzdXwEYFA6JReMRmVQumU3nExqVTqlV6xV75GkMM0Yr4V2Ax7GxBS0msw4PVjhc3s4bIPuEbhHnbT6+7ELC74/wJrAQxgxRZ2+x7tDxEdJtMtJSr5Fu8LJMMSULNFR0lLTU9BQ11SgyxHNPkQwTtusjrg2vNg3u7YzTwy72b9O3YtixspaW+Bg5r5m465k5k5Ua83YZ0ZhHmjPa2kNVfJy83PwcHfQyDhZXEK8VW+5DzjYXzL4um4vEy7Ov2z5JyrxtCygQ4P9BGnfkQQO3qJ/DgAoRvmAoDMW/ahpLpPP4EWRIkSOf+NrVMFExPbce4vI3y2W+fBUBcazZUpafZmooAnPHCNjOizJOBK2EI2Kxbbk2DL05MGjRYUYn/rPm9AvFpoEeUm3kU5DNrFQHdiIIFOc8fgedehVrlppbpYzCSlvagWRevXv59s0i8Oo7bOxmojHsklI0fShpon1bD2uyqGWhwquaqGVUZGQTY4grdyzXyHC1pmSMeZNR0pPngpV8h6NOoa6T5aDt+I0ZzpLVvmad81s31Rwy3kzN2m3m4JnIxt48ezSMHH6pV7d+XS9NNpLotonRjhYcxlwPNy5xF+py45j/eacf7pu90tzb2c/3fVy06dWoeas3tBs22Xh5acCznrotJV7k0+2o/Jgr7Yb46lLPs36Cu++ZAPUDbjkG2YguNOQsfK7A0Cw7LUT+ylJwwvbMOrGz6bCbkcYabQylIsXk0ZEo7wpjSbzyfBwyQvNilGqNQQ7xz8QVdfmKPAknVKbC7RDUTCMEgYuJRCp70rATIBsM5gvTDKzJsKEuJJMyF+PLkr4aQISLpRd36TI/3NbDp0sx3/KJQD+/W9INM1Fs8s54LBSySTcZgvPMT26clNJKLRWCmxM1tIpNuypcKc1eIv3wJ01PKlG0CwuBMMNJsOqzzUZlcVM+QNBMUayl/6Djjtb1Yp31xVp/efCV0gR0cq3HiNOqVVfGjBOt/44Ms9fOir22FbbSorZX9IAdC9n/lK3g0nLNPbevPup0x5YMxwOVkl7gYZdRXRArc91Y2j1MsXFN8HZDWQkNFtxqfUjq2wWnrS3FQ7m9ldeGfayq0yjvlNVaJG2tFqiFv9lq22VxUtLTQQcWNlqGJWbyVpOpTNgggPFbWFpHpUtWRnR13pnncVyw0p4Zgp4FWnjxDXJoo6kNz5VQRXW6VIflDLjjjQm+OuGsb67SanEhjvXkmh1z1CuqK7N2N9Q4HbdknpSd+ey6NEkLP2cDlfrhjMEuO+ZmQeOwapHHLhhku/9fE7uGnhVfnHEseljpR8jbhcnK3tR6+VMdYIzauTT9dYZZv7HOm2qSCcRW8NqIPh3Jzj0+mcfW9N738NU17lrrFn+1rKvPvQY5sfF2kDnmr4uzlx/hB/4RNpoVxt3slDHm3aaQyW0c++y11+K8fIeFWp+4evQuDXmzAvXl7v0B7K66pxfQQ9zh/n33vAGeV3qBYz+PuZtP8H90z+uWsaD0mfslpHDOsx+rIhXA4e1vBP2D0MQ4lr/3EdB2vkLE9jjYQez9i1/dW1c97BWPQqVPR5RDX5B+obRsaKl+ACwdrC6IuhhyrGQ3hF7csDYn3QXPX6/CoOEqiMOrHHAhXyL/VuByJ7cp0cqHFgRXEOF3O5VNT4rXGNwGPdhFL54rgpDrAQvpQb6grWAw2WIKfSLXFOSxbzLxOxydIkY6sx0Mj3QjlofOwkBjFG1XKagbFWmYut0Rz23gQKJFQmc3Pu4oZDAUYx0DKDJHEtKGUnEeIl3mHOup4IuhFOWNWrijxwHpfKJSZJ0yRxTPwMt3IdQO3yQ2r0fmZIAF5GOVHjPIQxorenfEk+8oFklsbUtNphvW6cQXpSvKqZGX/CUyg2m6XRJTkfcbZutqaccfquiERdNi4kZZTnP6pZQsEiGbkMe1Mn4KnvGLUxsNYTk4/kZto0mOy3J5mr8taG34rOSU/x6oS+O0r2/4TFuIEPqeImKISWVDW0LQEx2JPhRtrgokRHOV0NssdDXKcagOISqhi6bHBudU6UpFQhwXChJ8+JIlg4jkvZcerV4ujRpCxCNO+6xyUfd4JgnDaZ+ttCaolDxqWyC40zMI1JUqSRtYmibJ8IEJo4+oj0zyFBa8LTV0SO0q4Yoipc2lEo1QjVds8pmt49HDqmUClCO/Bya3NlWrsXQAS/na13Isy57/6mmhWKkb8xHGaTx52s9KaKTFovGriYXsZAkrLmpywXyUBSGjnFUkEY5gsmw75dyYEi83ciOKmdVcTmUKU86Ob7WfLWUZI8tazIKutLlVSc782v9b34rif4EF7QgJa5XCoq98kWOnIF/p2MXcdraa1WkCNbEPveLUGZ49bW1FS4jr2maC04XG1Go7XMFM923Rze4yftte91rhtOGFLD3lGj7yyQtpnpNuEsvnXP9S9L8BFvCABbxIAh8YwQn+wXsZ3GAmxPemZa3pOkto2Ht90rwNVPCGVbVhD38YxI8zcIhJXOIBOxjFKSYCYFW7WfrO97HlEdpgnAqQ/po4wIn6Lo553ON7+hjIQT6wiomcYuiGLYz3VR/+yKhVWNp2IckV8iznOmUrXzlHeMXylrn8hyJ/mcFHjbFOafc9Goszr5Pc8Tte3GWMbM3NcZazMOZcZzv/0wDMef4tYNmR5PC42HJ/krGWGWvGO0+jxodW9KIZ3WhHZ0DPke5rcL2UPP0u+cIahqvRCH3KJj8a1KEW9ahJXerrSRrV5pTw5EwbkxYXCR8xrSdyy8viWpsa17nW9a55veFU/3qUoOVRv1q5XMzOWLhijh2G55LoXj8b2tGW9rQXAWxre3G4+YVRMIJIY0Pf+nJaZPY7P01tc58b3elW916v3e7tURiV3wZ3hV295hT2ec2Iyfe6+d1vf/97yu4W+Addm76ntja4Tp6DTJKd7YYDHOIRl/jEQzxwiytu4fMW7zoo3nGPfxzkdr74yHUWcpOfHOUpV3kkSN7ycq0c/+Yxl/nMad4Al9+cUjXX+c553nN+4xzoNfL50IledKODOuhJv87Rmd50pz/dx0qXOjqhXnWrXx3rjZn61rOTda9/Hexh5wHXyd5SsZ8d7WlXOwPK3naPrB3ucZf7091ed3PMHe951/vM7d53cewd8IEX/MT9XvhTDB7xiVf8tA3f+FEsHvKRl3yoHV/5v0we85nXPJct3/kqbB70oRc9iT1f+iiMHvWpV71zTd/6Jqwe9rGXvSVcX/skzB73udc9OW3f+yHsHvjBF74EfF/8IAwf+ckHvvGNr3znP3/1zJf+9KlffetfH/vZ1/72ud99738f/OEX//jJX37znx/96f9X//rZ3373vx/+8Zf//Olff/vfH//51//++d9///8fAANQAAeQAAvQAA8QARNQAReQARvQAR8QAiNQAieQAivQAi8QAzNQAzeQAzvQAz8QBENQBEeQBEvQBE8QBVNQBVeQBVvQBV8QBmNQBmeQBmvQBm8QB3NQB3eQB3vQB38QCINQCIeQCIvQCI8QCZNQCZeQCZvQCZ8QCqNQCqeQCqvQCq8QC7NQC7eQC7vQC78QDMNQDMeQDMvQDM8QDdNQDdeQDdvQDd8QDuNQDueQDuvQDu8QD/NQD/eQD/vQD/8QEANREAeREAvREA8RERNREReRERvRER8REiNREieREiv/0RIvERMzURM3kRM70RM/ERRDURRHkRRL0RRPERVTURVXkRVb0RVfERZjURZnkRZr0RZvERdzURd3kRd70Rd/ERiDURiHkRiL0RiPERmTURmXkRmb0RmfERqjURqnkRqr0RqvERuzURu3kRu70Ru/ERzDURzHkRzL0RzPER3TUR3XkR3b0R3fER7jUR7nkR7r0R7vER/zUR/3kR/70R//ESADUiAHkiAL0iAPEiETUiEXkiEb0iEfEiIjUiInkiIr0iIvEiMzUiM3kiM70iM/EiRDUiRHkiRL0iRPEiVTUiVXkiVb0iVfEiZjUiZnkiZr0iZvEidzUid3kid70id//xIog1Ioh5Ioi9IojxIpk1Ipl5Ipm9IpnxIqo1Iqp5Iqq9IqrxIrs1Irt5Iru9IrvxIsw1Isx5Isy9IszxIt01It15It29It3xIu41Iu55Iu69Iu7xIv81Iv95Iv+9Iv/xIwA1MwB5MwC9MwDxMxE1MxF5MxG9MxHxMyI1MyJ5MyK9MyLxMzM1MzN5MzO9MzPxM0Q1M0R5M0S9M0TxM1U1M1V5M1W9M1XxM2Y1M2Z5M2a9M2bxM3c1M3d5M3e9M3fxM4g1M4h5M4i9M4jxM5k1M5l5M5m9M5nxM6o1M6p5M6q9M6rxM7s1M7t5M7u9M7vxM8w1M8x5M8y9M8zxM90/9TPdeTPdvTPd8TPuNTPueTPuvTPu8TP/NTP/eTP/vTP/8TQANUQAeUQAvUQA8UQRNUQReUQRvUQR8UQiNUQieUQivUQi8UQzNUQzeUQzvUQz8URENUREeUREvURE8URVNURVeURVvURV8URmNURmeURmvURm8UR3NUR3eUR3u0GKEPSCGON4OUSPttSIsUSdHtSJOUSaVtSZsUSnntSaOUSk1tSqsUSylvN7OUS0XtSrsUTO/sS8OUTONsTMsUTbHsTNOUTYNsTdsUTnHsTeOUTkFsTusUTxPsTvOUTwVsT/sUUB3rTwOVUCtiUAsVUdlrSxOVUVlvURsVUmniUCP/lVL5YFIrFVPH7lEzlVMd4VI7FVRN4FNDlVQ5YFQTrM1KFfVO1bmITZVsSeNUVe9YNUecKlU1TVYTj1aXwUBQaB7wTbJyNfJ21RsWi3aQrbm+I8KEldeQppdWiBOIFSK87VhNCZWSdSZSlVkb7WPOyonUqdo29b/KrFq5REzOSlu3VdROSnPYlYt0M8eUVb9cFYBe4eCIy9lAzMLUVbDclaP2zVTF1TzUyKaw1U7+TK4KA2CzDKT41aX8Fa4a1ssEtlaNlUgc5GJNaLXkddwAY0jm41EW9uN27FmdNbny696kTGTHaKQIypnCFV4Htr96qs/qjcnQ60xw1Ug6ZJ9G/wzlwJV/eqdnh3ZoeWqugEpiJzZmKzZzkuZD/kzbnqppIOO5cqytiFa+QI7Yxi2O/hVrv3ZlhS1VRGpsL0Fa1eVXL41pkAuQOMOw4OnVqAxs/2nmeHaRQPZROGRuwdZoW/agUou3cLNiR6hAUoh3lCyk9Alx07VYmwNLkmPn8PZu94mh9pZv78lvSypsI+BsPe3Jtu0axvaa3DZwWkluRZdyITfmiDaCKJc0tio3YHdNAMW6rjZZ1Eppc7N2ZxbOJsZXhaRnEZe2OmWWrnZTVCNpTc5xCch4J8dyLbdvy9Zr4ooOOhfeWElyrlWgUFdLpmLYTjd1qedxs/bfRgR37/+DP+5qbps3eTcic/+V9ij2GF51bem1RLx2rMDJq6AMIlw3W9mXfMvXdS3LXfn2edHMEuj2oPDHU+WXFfgFcwijw0xkgCt3J2TphcY3X/X2fJV3fKvHf52sWoO3XHV2GiiEgAE3cG/TJJw3TFCFXqUWeYFWci84jSRCgaUlh382eAkqQT7DVJ7EcYN4g7XBdm+3eRp4aR+YuCqHZq1JgytGfBU3bt8sQFR4PwC3hPm3uvAV3l6szFrXbgOKln5mhwtO1kTsim/XrN5Vd3k1dOvXVbkNcg03YrcGZFutIM6Yjd/3fGD4Xqz4Y5htjjsndm9tecm4fQtHcqGpkAO5X/3/OHHDasGWWBtSNt74BIpnuFvX6Kc0Oa0292991na1BXq3IJG16Z++Voxz+GhflmWR15GLNpb42IJ7CYvZzZIT+IbxWF/cg3YR5o/nWIhJmaJEN1abF6AMON9OGYmpioMlGTdGqo6b+XFnmZXL64rJVprz6dasd7dcmE80BZiPNnryOHa9BIZEGTK6+Zmp94BzmU7Wl5HjOZe3+SJq2JiLmXrrOZsfVpaXOZjKGULAeWN/92lhGYDHWXmoJ4jxlldVN4m4d5mfl7ni+Z3X151v+U22uYgtCaLNGKNBup+P2GXl2aCLS2p9GcnMF0ukA0q2LVU+FmIxwqWTOZqFw3wX/7qDCRpoKvhA9Bmfexp/WRe1moOR7Jmko0iiRzm8UnoxgDXWoDavwhfNOgSmYdp5Nxq8ajqSkXmajxeoKzpkXzeu7PmVMemDm3qivZrPDM1u1ebYdnp63ypj5BkAoPqdjLV7WfengGiMt3ah+7eMsdmPC9t39fmZGTijPCp1sTaSSxmrUNmtZytZAThCKjuaT9rA9Bpq0rlyfDqR/Smrp1pFhBqvl6mRj7rKnPpBlFmgHTt/RXtAEpaig9av9xmliBptbXmzQdijXZuLdfmNvQtaKUixIPtjlYdpjjd7edq72Lqt5Xps5mSoIQWdLauNGUp/G7ukvXusj5l23TekW/+kn884rWPJs89IpsFbLpJ4rwtXq++3aPkAscXbuocDu2vatydZmqD5pBlbtT+5aylbs0lLmvvbpEXbBfQaW2nWvSWqttms0pB5qo3avvGZtZNWuhtbhiZ5wGWbk747whf5ooN7jw+7raRGw++alD0be4mYnyFbmKtWsMljprlkiOemw0UarBdYifI4wpd6kEj8vU/8pklcjKl7HejaZT98yBm8wR2YvFitVy3aul0poZH7wrnax7vbsK3qpv35SkaklbcbcIYIzYm8x9s6oKe1h4M6yOE7p3mvuFF5XsvtgE82tiA4jue7tt+8ipHcyzP6iA7ceL0WrM63xQ2dkF3/mpN53MQNO9Hb1cSvmbuVHALWe16L+r2B9rlMiMBN5YntYuEUXLV/WJEVOqyHCa2hqs29G5EhnUJSm7MDuNU5WcQVotETfc1SOta8LaeVm9UpC7S3dpCbu7loC781naxBBNWlm9aVWrhJGsoNPX15u6wgvav5Znmf3YT/JtbDgcqjrHeHfW+5nIGXvcIzYqaflnBW9pVx2qd9WJV/nIN5Orw3m80RuMTre8PH28dBI7ADA8Vv3ZvpfMp3ucpR5NXx7X6F13MGeVZyvIDqK+CdPazXvNIdHX4BOdhDHn29pdfJ/Lonvd87NrHt6pazqbxvveBxne3K3bWY++EpXnxd/+3g5BvHP3mcEK7ZbZ3B9/u7pf3gMw7RO56R5zvfhb6crz3lPQmrYX7paVnmFQCc2RvdmXlNxGhtL0x2t6rejmK4Q5xlBp7JPRyZCpjbbVrbmz7qh417r17VU3uGoX7BwZvFb3vfO4Lma36Kbp7ie16rSf1wA33q+6fs497e7rs/tHjMW57u0aTozRmkvbnlB9rsfda3I/3JeX2h5v7X/z6daPvVfdmWMBnCCbxsj2PxE+jtYV5o397xx33gtZ3bgdvzTR+alL51JpjqLV3IU9hidB3PSF+9BJ9d14DWWn/e3f0knmR4Mx74w2jeZd/k9yjHM9zLDzzO4aPQM0rzg/8fZ/L70i1/njXe5pA/4VZe+TWquTs6e9OZpke9kyE56Dl/qJFYwOW8bQggvoEut79DCUEob10S3FNp52WjFopkBHoBypls9sLjhjHy2ToC3/s/MCgcEovGIzKpXDKbzic0Kp1Sq9YrNqvdcrteoK41K+HK5cZkooClWaJVu9Z2sd1rS1iH6eTJMvELionLB04fYCCiHIkK3JhFCF1On9zGoSSfYGJh5CNkJBqmzaXCl+kpaqrqKmur6ytsrOysEenHjaiZruWaI11vbiWhG5zkL/FMmq2mYd4ZB01jAqMjRUwc73IKqCLy9HUzdfjlM+WgnjC497d6Jtpedh/tPH3/vf09fr7+Pn+rdgQ0P7sGjsH2htivYcCUHRy2zuEdDRH/3eATL1ola8wscvrTzqAnbdLYieP2QFe3YMs6heyGbePDj8pKmqzo8VC/nDp38uzp8ydQnxQlfiK4q5fHOSCRHZPm0M4xQhOHIq12EWBGhOjObWPpkuu/cTRBdMwY5o9GZ95EkbPasqu7onHBYZoqsGaYoHr38u3r9y/gnlShQX1ndGCwGk0ZPlUKsVpANQEHw31WB/FXY5dRfl2XlpTFtyfhvc36GabKtpvM3ZQ5qfJV2Ezler4U+Dbu3Lp38+7tg3Lk0YkPe7ZcrNHTXE3r2pkmGfig6Evxlkw8vO5Z/+JgaccebXCyzZGiy67OXl5taBrMXxt+OdaY6+4ZfNOvb/8+/vxdBrOp2F47gFqRxpAaBCLkFmGPjGdLgKadhpF0oSmGXoMk/RdTZxZWVZxUrB0oHyTXgeZgS2LJ9lx8C0q44AP6ufgijDHK2BtVyYSCVYXaKZSQUvA0RiBhwADnXRzDZbWjeStaxiCJ5XDHXjvYXTiXh+ehpsJKZ8x05EfwQUgdLiaOMCOZZZp5Jpqz1BhkMq/lCOBdzTHVo4BzrhXVkFOKN52GmQUC5iHfcZYiixt2VxyIX1pSKGxeMqkjlScW6pSKYs6XJqaZaropp0hQ1l94RL5JUES1OTYSj/+aOZenqIb8maVb4tklUqxrkUWelGONEuKEIxYDXpLbqcbnUeTtauyD3i3GaCmdOvsstNG6CB2wfrQ6qpNkCePLj5AxxqqemD2KKCh9DkVsr9cmiyyUKXQIK7OKRjpshSlWK2lhhJq7g7T9+vsvwEDVaKNwJJGLrY+R3eoLgh/WAdG9rKJ74KxVLiLVvp8u9OG71wiZ8TsJRnySkBSBSqvIM4m0sZHMVewfxII8xujBjAZ8M8456/yKxgV5cmt4CLdmqIFzrGfrHSiCq2yR0CVC8NJRTxbvjS9LDS7VtHJ8cbwKXm1dHjuLPTbZZUOx5lSnKe2w0DX1+FiCDi+Lcdb/55aKi9UW3/k13337/bfGwRF1MuAe3q2D2YkrvnjiaBOuNuRtc+QuS1Yt1m3JhX+Nquade/456KF/mm/YjJt+OurRjg6e0RKtQLnkIyPVWFUsu2dr3aJvNbnuvfv+O/CAk55X6sUbf/yMaCd9IVz4NmgTbUcXWaANuQcvk6PXa789991LjTz44YvPm+MdCxRynxMPGrLHdPJ4HKLeaw2o/PXbfz/+C4y/P//9/8QfHpj3H+cdpU0gO99B2HacmOVvK9ixXgMjKMEJgst/FrwgBulht9mRIRSRG576eJc0quEuZXRDjuwoaCQIqrCFLnwh4jIowxnS8AsAtMtnWhc0/wK6bRIHHBxjqPeSH1JQVjA8IhKTSIoaMrGJTjyb8rymoWPFrWBamtpz1qUeigVRTkSU4DlYqMQxkvF+TzwjGtMIBpMtpFoXucobXWWYOWIxOyZ82EPEyL09lbGPflSiGgMpSCbm6We18+CDEtmJbShrhKyxXXK+CEZh/bGSlszfIDOpSf+Vz4BdaVXzBqggH5LSetrqz2b8OKBLsrKV9dskLGN5vNW5qz04Yk8i3fi6DvqnTZRImXMoVsZXubKYxvydLJOpTMUNyUK4/OAU25W97JUyUJL5liQjaMRjcrObmlsmOMOZM+XNKoe7dF0OkYS3cyakBBNZlTWT084+Wv/Jm/a8J6vEqc99qo4/JxvlzxQJzdqECnoGzZweMEa7YcJvePh8KES1wc+JUhRTzayaCcPkpniU0GA5uObyFJZCK5ZMj/J72EgjqtKVkqCiLn1pjC5KR2uFMmgBLaUUAcq+vBXihCz9KVCDCgCYErWo9QkcO7QywqRy8JMkY9084QkVVLrOmnITKlaz6k2jcrWrtwkcJ2pK0wGWxaCe5GWQBBeNpfJUq259axK9Kte5BkWmRHGnRoF1LAyFapToWyfMHErSecK1sIZFIl0Tq9h+XNSXBrwp6eIYxoMS9qP5IlhASzWnw3K2sxRcLGhDq0GpQQ1FwkSnX8tj2nc9DrP/IcVrUgnn2dnS1nuivS1u/dEzRtqyt2Q1a0EP2VSlplWhtlNqNmur3OX6LbfOfa4XComHgiB0b1W8kTPVajC9Ulev7hTQTpkr3vF6DrrmPW8VonZZnIo1V05Fa1Rjq9k5wlNk5L0vfgGH3v3ylwnSDdPgEAk7W+Y0rc0Jb2sBuxyV5bfBDr5afyMs4SH8d6bU3KgzV0lZy1rYo4KTalsfLOIRx3DCJp7w5u5qX3Q2EnqL+m5eYXxXUHX0cCYlMY4bfOIdR1i97+wYe32WYV36rJbDhezHDpzSHDO5yfrjMZTPS9oAY2XGIWHnP833UfNNrZcLpHGInSxmEUe5zM+9/5ppq+nbsca4qW7u0D+tgUeUhnnMdtaxmfMsWr59w5ciLXBei1zfPqftbkJezmu5fOdFk1jPjl6s30iZNvbadG2HljFrgQSxyDK60zh+NKjn6uMq41XAvZxSl7fbXe0iOpgGli1Lb2zX68kaorUOXahzzdUpt1i4b1Y0b39tSI3aiW4Y7V5yKfRe3c3Lc1o0bLNTTBVdUxum0g4vq2Mgs0wD5NgiNXYd6+zsaMMr2MymYugS5VZ0942dy6g2vCma4itLWgxFwfaw2mjcZEc6Hc2UZu8Y3O9K3Rp4zz4XwNudcOLFu+HhbDeXpUrvd5bI0H6942AHXXCJeaWQ/P7bwf+xpsWQF3HhJjM5mj/OL4ezPJl8xpuRVQxbNmN65t9mX51UtnF/vnhpJP/czzk+HncfMeiwEp11393ypcMy0olm8RYvq8un7qhEdXrZzhH+K3FbNes8Fyxpn41ybRqdXlz3uKyZrvZMCm92SNZ21Vnk6lJ7+WMK3l7Z2dIZc9N9mtED2dAMtdbdzUUjQCurHVPypXB9kd0t81iIEE+kaa+98mkEumgy/2P7XtnKFdv64U5q9O/IC8OQZdtaHV9pwoLtveYSy4D2RT+nWn1e3HBST9kdHQgtO06lUXkDLC/8JyIdhK+nKswBPFWH7tLrmxu74GMT+96vMH1cUofLNrT/0EpDaRHmNM0n+cquPnOur8TFktJEpXfzA5vmF9Y09W0x/PnXMN3GdWRPOf/UuXuXetvW3ujJmXtxkPhN08L43cKE3IQ8lsIMFHFVxt9tBpKlEkyc3zV9H6zFDfLxXgMyFZaMTLKkRc99wpKhAP2dYAYBUNGcFm/pVOSBW7Yx34F52JYAifvknVWhx72dj4X5mg/64Ac5UK8Fl/bJXcI9k0fR2wFRURC6H98xww4SYXX04OFhH0WgIBZyEhvRmGux3tPN1ws6Fpxh3aZhFxiCGauln9M0XvdZVmtlmBLGIYFJYUdMHgnuUEoBnEDVVAH2FkBNla+JXdCFYDSxoRyi/5YiUF4WLmL4ZMm3+Zl2yeHEdRtKxRlCEeCKmSFUfVjflSCD+N0QUpYBmh71vQF8iaIVxp+jmCIiLN6aoYUeEuI4NBv0tQtHGWLttVcoKh0j9qLxfGLV5R4XkpQlGhkgQiLJ6Nyw5R+ddc7PySIDhmITvuI0igPTqJ8TSt4LUuOgtd+phRIaipIdJuId0mEqul/TQN4V+iI7og45cGLiZWAmeltJBQfUBBby1c35Yd7CQSMdVuOvvZkskuOaUWEtgh0CcpjKdZ8XRt3b7U4UZmM5mqPgQVg7XuTivGOX/ZJa6RsLVhwg6h/lJNklbhvwfR3gteEfliIpFuQo/tBATv8kKIZVlBSkukUkfVWJKuLkKf5gHe4iD34PRg5l2ZiDvrVFSRpatpEat+FcYcijvc2j5kxWD2pfUPYkEh7iVc7kE/7g4R3kyBmfVnadXOikS1ojS+Lib/FkPhGlW+6MMxQaaIBh5lzGFr2W7D1lPc7l2fkcMVllGz2kZD3kPxoeykHjSp7lLayLQJ2ePmbMTWJlZOYKHEmSCB4KnnTlEr0lZ95MXDIQR9ZXjJ2VJiKJwC3Y3RllUk7ldlgK7gFkZjLepDAmJXHlkwjZWHLfEgpiD9ne7BGNLY5dhJAfmKhe6XQmcvZLQnnjWYQeRnXhqRFaJKpHR4am82nkt6AP6CX/43YeZU96J7ElnTryygdWpSa412m2H4ec59C1nt6B5E2aSu11TR694QMWzFAkp37203muplqAp41pmYqhEhp6mHNipzoFXN5A5f6R4S086HssJyPIHNXxpRttYwAFikZ2myd2KD0iXMzhG4Su436W6KY0ZydqaHWWJqldnT2uqN2dHIX+Ds2o6IiiKEGCVeHoEYOuDHVKKLN0zagVjokWaaZEJfTBXY9WlfJt4iPS5Yc6YnE5GA56WmcZKZaeCZL6JyDgH4ICEyUOo88x6YOJp5XmV5amafJ06Yyq6JI26IEWGV4yp5Qi5GxJ4HWeaUSpKZ++yP+xIlJOaVwKUzPu/5R0Zh1V5akrdZyePlifPip+sOmBbimMUsOPqeFfBaPEVOqdzoaiNupDQaqo0gc6vOh/ssmXAhmlsgy1oOp4dSeoOtiozupuoOjy9efNDWqMYmoy1iWduimXxqqwrhStFutXleqHTSIMZk0lhqOkgpjTtOmwTutPGau1+sUvIVfMkF9frpicBqoFRuuvUiu5ctO1nqtehOauuug92ptrhWSgNmCwLif/lau9hiq65qtgqOuT6uVcahqvDmolCiqTfOG9Hqy56qvC5gQwwmui6aNwyNSqnWToUSzCXqwELazG7gO1eN2ncijGhmxtbSzJ3oPInizK2k/Jruw8pKzLvv9s8LCszMYCzNaszX7OzOasbt0sz/asReos0J6Czw4t0Q5J0B6tDRWt0i6t/CGt02oB00at1LbA01btFUwt1mZt8Fkt10qB1n4t1nat2D4B2JYt044t2i6B2a4t0aat2x4B28Ytz74t3VKY3N7ty9at3v4A3vYtyu4t4AqA3w4uxgbu3hIu4t6r4ept4jYutS5u3Tqu5MYq5NLt5F7umVbu22Iu5zKa5rpt54bumH0u6Zau6Z4u6qau6q4u67au674u7Mau7M4u7dau7d4u7uau7u4u7/au7/4u8Aav8A4v8Rav8R4v8iav8i4v8zav8z4v9Eav9E4v9Vav9V4v9mb/r/ZuL/d2r/d+L/iGr/iOL/mWr/meL/qmr/quL/u2r/u+L/zGr/zOL/3Wr/3eL/7mr/7uL//2r//+LwAHsAAPMAEXsAEfMAInsAIvMAM3sAM/MARHsARPMAVXsAVfMAZnsAZvMAd3sAd/MAiHsAiPMAmXsAmfMAqnsAqvMAu3sAu/MAzHsAzPMA3XsA3fMA7nsA7vMA/3sA//MBAHsRAPMREXsREfMRInsRIvMRM3sRM/MRRHsRRPMRVXsRVfMRZnsRZvMRd3sRd/MRiHsRiPMRmXsRmfMRqnsRqvMRu3sRu/MRzHsRzPMR3XsR3fMR7nsR7vMR/3sR//MSAHsiAP/zIhF7IhHzIiJ7IiLzIjN7IjPzIkR7IkTzIlV7IlXzImZ7ImbzInd7InfzIoh7IojzIpl7IpnzIqp7IqrzIrt7IrvzIsx7IszzIt17It3zIu57Iu7zIv97Iv/zIwB7MwDzMxF7MxHzMyJ7MyLzMzN7MzPzM0R7M0TzM1V7M1XzM2Z7M2bzM3d7M3fzM4h7M4jzM5l7M5nzM6p7M6rzM7t7M7vzM8x7M8zzM917M93zM+57M+7zM/97M//zNAB7RADzRBF7RBHzRCJ7RCLzRDN7RDPzRER7RETzRFV7RFXzRGZ7RGbzRHd7RHfzRIh7RIjzRJl7RJnzRKp7RKrzRLt/+0S780TMe0TM80Tde0Td80Tue0Tu80T/e0T/80UAe1UA81URe1UR81Uie1Ui81Uze1Uz81VEe1VE81VVe1VV81Vme1Vm81V3e1V381WIe1WI81WZe1WZ81Wqe1Wq81W7e1W781XMe1XM81Xde1Xd81Xue1Xu81X/e1X/81YAe2YA82YRe2YR82Yie2Yi82Yze2Yz82ZEe2ZE82ZVe2ZV82Zme2Zm82Z3e2Z382aIe2aI82aZe2aZ82aqe2aq82a7e2a782bMe2bM82bde2bd82bue2bu82b/e2b/82cAe3cA83cRe3cR83cie3ci83cze3cz83dEe3dE83dVe3dV//N3Znt3ZvN3d3t3d/N3iHt3iPN3mXt3mfN3qnt3qvN3u3t3u/N3zHt3zPN33Xt33fN37nt37vN3/3t3//N4AHuIAPOIEXuIEfOIInuIIvOIM3uIM/OIRHuIRPOIVXuIVfOIZnuIZvOId3uId/OIiHuIiPOImXuImfOIqnuIqvOIu3uIu/OIzHuIzPOI3XuI3fOI7nuI7vOI/3uI//OJAHuZAPOZEXuZEfOZInuZIvOZM3uZM/OZRHuZRPOZVXuZVfOZZnuZZvOZd3uZd/OZiHuZiPOZmXuZmfOZqnuZqvOZu3uZu/OZzHuZzPOZ3XuZ3fOZ7nuZ7vOZ/3uZ//OaAH/7qgDzqhF7qhHzqiJ7qiLzqjN7qjPzqkR7qkTzqlV7qlXzqmZ7qmbzqnd7qnfzqoh7qojzqpl7qpnzqqp7qqrzqrt7qrvzqsx7qszzqt17qt3zqu57qu7zqv97qv/zqwB7uwDzuxF7uxHzuyJ7uyLzuzN7uzPzu0R7u0Tzu1V7u1Xzu2Z7u2bzu3d7u3fzu4h7u4jzu5l7u5nzu6p7u6rzu7t7u7vzu8x7u8zzu917u93zu+57u+7zu/97u//zvAB7zADzzBF7zBHzzCJ7zCLzzDN7zDPzzER7zETzzFV7zFXzzGZ7zGbzzHd7zHfzzIh7zIjzzJl7zJnzzKp7zKr/88y7e8y788zMe8zM88zde8zd88zue8zu88z/e8z/880Ae90A890Re90R890ie90i890ze90z891Ee91E891Ve91V891me91m8913e913892Ie92I892Ze92Z892qe92q8927e927893Me93M893de93d893ue93u893/e93/894Ae+4A8+4Re+4R8+4ie+4i8+4ze+4z8+5Ee+5E8+5Ve+5V8+5me+5m8+53e+538+6Ie+6I8+6Ze+6Z8+6qe+6q8+67e+678+7Me+7M8+7de+7d8+7ue+7u8+7/e+7/8+8Ae/8A8/8Re/8R8/8ie/8i8/8ze/8z8/9Ee/9E8/9Vf/v/VfP/Znv/ZvP/d3v/d/P/iHv/iPP/mXv/mfP/qnv/qvP/u3v/u/P/zHv/zPP/3Xv/3fP/7nv/7vP//3v/8TgHxMXW5/GOWk1V6c9ebdfzAUR7I0TzRVV7Z1XziWZ7q2bzzXd773f2BQOCQWjUdkUrlkNp1PaFQ6pVatV2xWu+V2vV9wWDwml81ndFq9Zrfdb3hcPqfX7Xd8Xr/n9/1/wEDBQcJCw0PERMVFxkbHR8hIyUnKSstLzEzNTc5Oz0/QUNFR0lLTU9RU1VXWVtdX2FjZWdpa21vcXN1d3l7fX+Bg4WHiYuNj5GTlZeZm52foaOlp6mrra+xs7W3ubu9v//Bw8XHycvNz9HT1dfZ293f4ePl5+nr7e/x8/X3+fv9/gAEFDiRY0OBBhAkVLmTY0OFDiBElTqRY0eJFjBk1buTY0eNHkCFFjiRZ0uRJlClVrmTZ0uVLmDFlzqRZ0+ZNnDl17uTZ0+dPoEGFDiVa1OhRpEmVLmXa1OlTqFGlTqVa1epVrFm1buXa1etXsGHFjiVb1uxZtGnVrmXb1u1buHHlzqVb1+5dvHn17uXb1+9fwIEFDyZc2PBhxIkVL2bc2PFjyJElT6Zc2fJlzJk1b+bc2fNn0KFFjyZd2vRp1KlVr2bd2vVr2LFlz6Zd2/Zt3Ll17+bd2/dv4MGFDyde3P/4ceTJlS9n3tz5c+jRpU+nXt36dezZtW/n3t37d/DhxY8nX978efTp1a9n3979e/jx5c+nX9/+ffz59e/n39//fwADFHBAAgs08EAEE1RwQQYbdPBBCCOUcEIKK7TwQgwz1HBDDjv08EMQQxRxRBJLNPFEFFNUcUUWW3TxRRhjlHFGGmu08UYcc9RxRx579PFHIIMUckgiizTySCSTVHJJJpt08kkoo5RySiqrtPJKLLPUcksuu/TySzDDFHNMMss080w001RzTTbbdPNNOOOUc04667TzTjzz1HNPPvv0809AAxV0UEILNfRQRBNVdFFGG3X0UUgjlXRSSiu19FKETDPVdFNOO/X0U1BDFXVUUks19VRUU1V1VVZbdfVVWGOVdVZaa7X1Vlxz1XVXXnv19VdggxV2WGKLNfZYZJNVdllmm3X2WWijlXZaaqu19lpss9V2W2679fZbcMMVd1xyyzX3XHTTVXdddtt1911445V3XnrrtfdefPPVd19++/X3hAIAADs='>   </background-part>
	<card-part id=2 bkgndid=1 class=current bitmap='data:image/gif;base64,R0lGODdhAAVABpEAAAAAAP///wAAAAAAACH5BAkAAAIALAAAAAAABUAGAAL/lI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+///D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjjruyGOPPv4IZJBCDklkkUYeiWSSSi7JZJNOPglllFJOSWWVVl6JZZZabslll15+CWaYYo5JZplmnolmmmquyWabbr4JZ5xyzklnnXbeiWeeeu7JZ59+/glooIIOSmihhh6KaKKKLspoo44+Cmmkkk5KaaWWXopppppuymmnnn4Kaqiijkpqqaaeimqqqq7KaquuvgprrLLOSmuttt6Ka6667sprr77+Cmywwg5LbLHGHotsssr/Lstss84+C2200k5LbbXWXottttpuy2233n4Lbrjijktuueaei2666q7LbrvuvgtvvPLOS2+99t6Lb7767stvv/7+C3DAAg9McMEGH4xwwgovzHDDDj8MccQST0xxxRZfjHHGGm/McccefwxyyCKPTHLJJp+Mcsoqr8xyyy6/DHPMMs9Mc80234xzzjrvzHPPPv8MdNBCD0100UYfjXTSSi/NdNNOPw111FJPTXXVVl+NddZab811115/DXbYYo9Ndtlmn4122mqvzXbbbr8Nd9xyz0133XbfjXfeeu/Nd99+/w144IIPTnjhhh+OeOKKL854444/Dnnkkk9OeeWW/1+Oeeaab855555/Dnrooo9Oeummn4566qqvznrrrr8Oe+yyz0577bbfjnvuuu/Oe+++/w588MIPT3zxxh+PfPLKL898884/D3300k9PffXWX4999tpvz3333n8Pfvjij09++eafj3766q/Pfvvuvw9//PLPT3/99t+Pf/76789///7/D8AACnCABCygAQ+IwAQqcIEMbKADHwjBCEpwghSsoAUviMEManCDHOygBz8IwhCKcIQkLKEJT4jCFKpwhSxsoQtfCMMYynCGNKyhDW+IwxzqcIc87KEPfwjEIApxiEQsohGPiMQkKnGJTGyiE58IxShKcYpUrKIVr4jFLP9qcYtc7KIXvwjGMIpxjGQsoxnPiMY0qnGNbGyjG98IxzjKcY50rKMd74jHPOpxj3zsox//CMhACnKQhCykIQ+JyEQqcpGMbKQjHwnJSEpykpSspCUviclManKTnOykJz8JylCKcpSkLKUpT4nKVKpylaxspStfCctYynKWtKylLW+Jy1zqcpe87KUvfwnMYApzmMQspjGPicxkKnOZzGymM58JzWhKc5rUrKY1r4nNbGpzm9zspje/Cc5winOc5CynOc+JznSqc53sbKc73wnPeMpznvSspz3vic986nOf/OynP/8J0IAKdKAELahBD4rQhCp0oQxtqEMfCtGISnT/ohStqEUvitGManSjHO2oRz8K0pCKdKQkLalJT4rSlKp0pSxtqUtfCtOYynSmNK2pTW+K05zqdKc87alPfwrUoAp1qEQtqlGPitSkKnWpTG2qU58K1ahKdapUrapVr4rVrGp1q1ztqle/CtawinWsZC2rWc+K1rSqda1sbatb3wrXuMp1rnStq13vite86nWvfO2rX/8K2MAKdrCELaxhjQMAAAQ0sQFQLD8TC4AASBayjrUnZCWLWcxCtp6XzWxmKRtPynp2tJrd7DpFS9rUNjayiU1nZ1ULW9CSE7WwrW1pW/vN1tp2t56NbGNz61veCneylcUmbYc7XNxe87jI/xWuaa352uY6V7bTZK50d0vZ4kYzutfFLmOJS83vdpe3tFXudsdLXvFSV5rBRW9qy3vZanLXvZ/1bXYlC935dhe18NUuNBkr3vEC2L6sXe1z2Xvb9ib3tfxd73YVvNrmdva+BiZweCOsWQN7t8AarvBkVxve+Q64tt8V7YgJbN4HY7i3ImawehkMYvmi+L3BZW2Jb4xhG6eYvSgO8G077OEgV9i/PGaxj4l74xq7+LfbZK5+kWzfHOuYyPl18ZGhjGUoUxm6We6ylXu8ZeMaub4DnjKBYwzO6B63wS8+cJq5q2YkJzjM3aRwlk0cYTeX084dLvGQ3enkGhtYnnbG8f+O38nn7ObTxIe2bJn/6eB9RvqwlK60pS+N6UxretOc7rSnPw3qUIt61KQutalPjepUq3rVrG61q18N61jLeta0rrWtb43rXOt617zuta9/DexgC3vYxC62sY+N7GQre9nMbraznw3taEt72tSutrWvje1sa3vb3O62t78N7nCLe9zkLre5z43udKt73exut7vfDe94y3ve9K63ve+N73zre9/87re//w3wgAt84AQvuMEPjvCEK3zhDG+4wx8O8YhLfOIUr7jFL47xjGt84xzvuMc/DvKQi3zkJC+5yU+O8pSrfOUsb7nLXw7zmMt85jSvuc1vjvOc63znPO+5z3//DvSgC33oRC+60Y+O9KQrfelMb7rTnw71qEt96lSvutWvjvWsa33rXO+6178O9rCLfexkL7vZz472tKt97Wxvu9vfDve4y33udK+73e+O97zrfe9877vf/w74wAt+8IQvvOEPj/jEK37xjG+84x8P+chLfvKUr7zlL4/5zGt+85zvvOc/D/rQi370pC+96U+P+tSrfvWsb73rXw/72Mt+9rSvve1vj/vc6373vO+9738P/OALf/jEL77xj4/85Ct/+cxvvvOfD/3oS3/61K++9a+P/exrf/vc7773vw/+8It//OQvv/nPj/70q3/97G+/+98P//jLf/70r7/974////zrf//877///w+AASiAA0iABWiAB4iACaiAC8iADeiADwiBESiBE0iBFWiBF4iBGaiBG8iBHeiBHwiCISiCI0iCJWiCJ4iCKaiCK8iCLeiCLwiDMSiDM0iDNWiDN4iDOaiDO8iDPeiDPwiEQSiEQ0iERWiER4iESaiES8iETeiETwiFUSiFU0iFVWiFV4iFWaiFW8iFXeiFXwiGYSiGY0iGZWiGZ4iGaaiGa8iGbeiGbwiHcSiHc0iHdWiHd4iHeaiHe8iHfeiHfwiIgSiIg0iIhWiIh4iIiaiIi8iIjeiIjwiJkSiJk0iJlWiJl4iJmaiJm8iJneiJnwiKoSiKo1hIiqVoiqeIiqmoiqvIiq3oiq8Ii7Eoi7NIi7Voi7eIi7moi7vIi73oi78IjMEojMNIjMVojMeIjMmojMvIjM3ojM8IjdEojdNIjdVojdeIjdmojdsIDgUAADs='><div slot='-1'><div>Open XTalk</div><div>HyperCard SImulator</div><div>Tests</div></div><button-part type=roundrect name='put the userAgent' topleft=428,190 width=213 height=34 id=3 script='on mouseUp
	answer the userAgent
	end mouseUp
	' color='#919191' bevel=1> </button-part><button-part type=roundrect name='put the systemAppearance' topleft=324,296 width=316 height=34 id=3 script='on mouseUp
	answer the systemAppearance
	-- put getTheme()
	end mouseUp
	' color='#919191' bevel=1> </button-part><button-part type=roundrect name='put the userLanguage' topleft=413,225 width=227 height=37 id=3 script='on mouseUp
	answer the userLanguage
	end mouseUp
	' color='#919191' bevel=1> </button-part><button-part type=roundrect name='put the platform' topleft=384,264 width=257 height=31 id=3 script='on mouseUp
	answer the platform
	end mouseUp
	' color='#919191' bevel=1> </button-part><button-part type=popup name='set the backDrop to color' topleft=190,337 width=450 height=44 id=3 script='on mouseUp
	put the selectedText of me into tPicked
	ifÂ tPicked is "Enter Color..." then

	Ask "Enter an HTML color name or an RGB Hex value" with "#380000"
	if it is not empty then
	-- backdropÂ it
	set the backDrop to it
	else
	exit mouseup
	end if
	else
	-- backdropÂ tPicked
	set the backDrop to tPicked
	end if
	put the foregrounddColor of me
	end mouseUp
	' selectedline=8 textstyle=bold class=bold textalign=left textfont=Arial family=5 hilite=true color='#3a88fe'>Enter Color...<br>AliceBlue<br>AntiqueWhite<br>Aqua<br>Aquamarine<br>Azure<br>Beige<br>Bisque<br>Black<br>BlanchedAlmond<br>Blue<br>BlueViolet<br>Brown<br>BurlyWood<br>CadetBlue<br>Chartreuse<br>Chocolate<br>Coral<br>CornflowerBlue<br>Cornsilk<br>Crimson<br>Cyan<br>DarkBlue<br>DarkCyan<br>DarkGoldenRod<br>DarkGray<br>DarkGrey<br>DarkGreen<br>DarkKhaki<br>DarkMagenta<br>DarkOliveGreen<br>DarkOrange<br>DarkOrchid<br>DarkRed<br>DarkSalmon<br>DarkSeaGreen<br>DarkSlateBlue<br>DarkSlateGray<br>DarkSlateGrey<br>DarkTurquoise<br>DarkViolet<br>DeepPink<br>DeepSkyBlue<br>DimGray<br>DimGrey<br>DodgerBlue<br>FireBrick<br>FloralWhite<br>ForestGreen<br>Fuchsia<br>Gainsboro<br>GhostWhite<br>Gold<br>GoldenRod<br>Gray<br>Grey<br>Green<br>GreenYellow<br>HoneyDew<br>HotPink<br>IndianRed<br>Indigo<br>Ivory<br>Khaki<br>Lavender<br>LavenderBlush<br>LawnGreen<br>LemonChiffon<br>LightBlue<br>LightCoral<br>LightCyan<br>LightGoldenRodYellow<br>LightGray<br>LightGrey<br>LightGreen<br>LightPink<br>LightSalmon<br>LightSeaGreen<br>LightSkyBlue<br>LightSlateGray<br>LightSlateGrey<br>LightSteelBlue<br>LightYellow<br>Lime<br>LimeGreen<br>Linen<br>Magenta<br>Maroon<br>MediumAquaMarine<br>MediumBlue<br>MediumOrchid<br>MediumPurple<br>MediumSeaGreen<br>MediumSlateBlue<br>MediumSpringGreen<br>MediumTurquoise<br>MediumVioletRed<br>MidnightBlue<br>MintCream<br>MistyRose<br>Moccasin<br>NavajoWhite<br>Navy<br>OldLace<br>Olive<br>OliveDrab<br>Orange<br>OrangeRed<br>Orchid<br>PaleGoldenRod<br>PaleGreen<br>PaleTurquoise<br>PaleVioletRed<br>PapayaWhip<br>PeachPuff<br>Peru<br>Pink<br>Plum<br>PowderBlue<br>Purple<br>RebeccaPurple<br>Red<br>RosyBrown<br>RoyalBlue<br>SaddleBrown<br>Salmon<br>SandyBrown<br>SeaGreen<br>SeaShell<br>Sienna<br>Silver<br>SkyBlue<br>SlateBlue<br>SlateGray<br>SlateGrey<br>Snow<br>SpringGreen<br>SteelBlue<br>Tan<br>Teal<br>Thistle<br>Tomato<br>Turquoise<br>Violet<br>Wheat<br>White<br>WhiteSmoke<br>Yellow<br>YellowGreen</button-part><field-part part=field type=transparent topleft='-1,752' width=643 height=49 id=6 textstyle='' textalign=center><div>NOTE: For the syntax in the tests above to function in HyperCard Simulator, you must thee add OXT script additions on the next card to the Sim's Script (at level above 'Home' stack).</div></field-part><button-part name=GoForawrd topleft=613,721 width=27 height=31 id=2 showname=false icon=28811 script='on mouseUp
	visual effect wipe left fast
	go next
	end mouseUp
	'> </button-part><button-part type=roundrect name='Is WebMIDI is available in the current browser?' topleft=193,386 width=447 height=33 id=3 script='on mouseUp
	if the webMIDIAvailable then
	Answer "WebMIDI is available, so that&apos;s cool!"
	else
	Answer "WebMIDI is NOT available, lame!!!"
	end if
	end mouseUp
	'> </button-part><button-part name=GoBack topleft=0,723 width=27 height=31 id=2 showname=false icon=28810 script='on mouseUp
	visual effect wipe right fast
	go prev
	end mouseUp
	'> </button-part><button-part type=roundrect name='launchURL "sms:"' topleft=25,298 width=162 height=34 id=2 script='on mouseUp
	launchURL "sms:+12345678&amp;body=Hello Text!"
	end mouseUp
	'> </button-part><button-part type=roundrect name='launchURL "tel:"' topleft=25,336 width=162 height=34 id=2 script='on mouseUp
	launchURL "tel:1-234-5678"
	end mouseUp
	'> </button-part><field-part part=field id=7 topleft=379,0 width=261 height=180 type=transparent dontwrap=true fixedlineheight=true textfont=Palatino textstyle=bold class=bold textalign=center textsize=18 locktext=true><div><div><a href='http://www.hypercard.center/'><img src='http://www.hypercard.center/ui/images/headericon.jpg' alt=Home width=64 height=64 border=0></a></div><div><a href='http://www.hypercard.center/'>THE HYPERCARD CENTER</a></div><br></div><div><table><tbody><tr><td><table width='100%' cellpadding=0 cellspacing=0 border=0><tbody><tr><td width=74 valign=top></td><td><p><font face=Palatino,serif size='+1'><span><a href='http://www.hypercard.center/HyperTalkReference'>HyperTalk Reference</a></span></font></p></td></tr></tbody></table></td><td></td></tr></tbody></table><br></div><div><br></div></field-part><button-part type=roundrect name='Speech Test...' topleft=196,297 width=120 height=30 id=8 script='on mouseUp
	Ask "What to speek" with "Hello Speech"
	speak it
	end mouseUp
	'> </button-part><button-part type=popup name='set the cursor' topleft=262,431 width=378 height=32 id=3 script='on mouseUp
	put the selectedText of me into tPicked
	if tPicked is empty then
	exit museUp
	else
	-- backdrop tPicked
	set the cursor to tPicked
	end if
	put the cursor
	end mouseUp

	' color='#919191' bevel=1 selectedline=1>alias<br>all-scroll<br>auto<br>cell<br>context-menu<br>col-resize<br>copy<br>crosshair<br>default<br>e-resize<br>ew-resize<br>grab<br>grabbing<br>help<br>move<br>n-resize<br>ne-resize<br>nesw-resize<br>ns-resize<br>nw-resize<br>nwse-resize<br>no-drop<br>none<br>not-allowed<br>pointer<br>progress<br>row-resize<br>s-resize<br>se-resize<br>sw-resize<br>text<br>auto<br>vertical-text<br>w-resize<br>wait<br>zoom-in<br>zoom-out<br>initial</button-part><field-part part=field type=transparent topleft=0,0 width=429 height=259 id=5 name='OXT Info' locktext=true textstyle=bold class=bold textalign=left><div><div><div><br></div></div><div><br></div><div><img align=left src='https://openxtalk.org/images/OXTlogo.png' alt=''><h2 align=left><strong>OpenXTalk</strong></h2><p>Together, we can make sure that aÂ <strong>Free Open SourceÂ <a href='https://en.wikipedia.org/wiki/XTalk'>xTalk</a></strong>Â language remains available for educators and hobbyists moving forward. We are seeking contributors of all skill levels. Visit the forums to join the conversation!</p></div><div><br></div><div><br></div><div><br></div><br></div></field-part><button-part type=rectangle name='launchURL OpenXTalk.org' topleft=43,239 width=128 height=44 id=2 script='on mouseUp
	launchURL "https://OpenXTalk.org"
	end mouseUp
	' color='#d9cafe' bevel=4> </button-part></card-part>
	<card-part id=3 bkgndid=1 class='forward-card' bitmap='data:image/gif;base64,R0lGODdhAAVABpEAAAAAAP///wAAAAAAACH5BAkAAAIALAAAAAAABUAGAAL/lI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+///D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjjruyGOPPv4IZJBCDklkkUYeiWSSSi7JZJNOPglllFJOSWWVVl6JZZZabslll15+CWaYYo5JZplmnolmmmquyWabbr4JZ5xyzklnnXbeiWeeeu7JZ59+/glooIIOSmihhh6KaKKKLspoo44+Cmmkkk5KaaWWXopppppuymmnnn4Kaqiijkpqqaaeimqqqq7KaquuvgprrLLOSmuttt6Ka6667sprr77+Cmywwg5LbLHGHotsssr/Lstss84+C2200k5LbbXWXottttpuy2233n4Lbrjijktuueaei2666q7LbrvuvgtvvPLOS2+99t6Lb7767stvv/7+C3DAAg9McMEGH4xwwgovzHDDDj8MccQST0xxxRZfjHHGGm/McccefwxyyCKPTHLJJp+Mcsoqr8xyyy6/DHPMMs9Mc80234xzzjrvzHPPPv8MdNBCD0100UYfjXTSSi/NdNNOPw111FJPTXXVVl+NddZab811115/DXbYYo9Ndtlmn4122mqvzXbbbr8Nd9xyz0133XbfjXfeeu/Nd99+/w144IIPTnjhhh+OeOKKL854444/Dnnkkk9OeeWW/1+Oeeaab855555/Dnrooo9Oeummn4566qqvznrrrr8Oe+yyz0577bbfjnvuuu/Oe+++/w588MIPT3zxxh+PfPLKL898884/D3300k9PffXWX4999tpvz3333n8Pfvjij09++eafj3766q/Pfvvuvw9//PLPT3/99t+Pf/76789///7/D8AACnCABCygAQ+IwAQqcIEMbKADHwjBCEpwghSsoAUviMEManCDHOygBz9oQQAAAITmECEJT4jCFKpwhSxsoQtfCMMYynCGNKyhDW+IwxzqcIc87KEPfwjEIApxiEQsohGPiMQkKnGJTGyiE58IxShKcYpUrKIVr4jFLP9qcYtc7KIXvwjGMIpxjGQsoxnPiMY0qnGNbGyjG98IxzjKcY50rKMd74jHPOpxj3zsox//CMhACnKQhCykIQ+JyEQqcpGMbKQjHwnJSEpykpSspCUviclManKTnOykJz8JylCKcpSkLKUpT4nKVKpylaxspStfCctYynKWtKylLW+Jy1zqcpe87KUvfwnMYApzmMQspjGPicxkKnOZzGymM58JzWhKc5rUrKY1r4nNbGpzm9zspje/Cc5winOc5CynOc+JznSqc53sbKc73wnPeMpznvSspz3vic986nOf/OynP/8J0IAKdKAELahBD4rQhCp0oQxtqEMfCtGISnT/ohStqEUvitGManSjHO2oRz8K0pCKdKQkLalJT4rSlKp0pSxtqUtfCtOYynSmNK2pTW+K05zqdKc87alPfwrUoAp1qEQtqlGPitSkKnWpTG2qU58K1ahKdapUrapVr4rVrGp1q1ztqle/CtawinWsZC2rWc+K1rSqda1sbatb3wrXuMp1rnStq13vite86nWvfO2rX/8K2MAKdrCELaxhD4vYxCp2sYxtrGMfC9nISnaylK2sZS+L2cxqdrOc7axnPwva0Ip2tKQtrWlPi9rUqna1rG2ta18L29jKdra0ra1tb4vb3Op2t7ztrW9/C9zgCne4xC2ucY+L3OQqd7nM/22uc58L3ehKd7rUra51r4vd7Gp3u9ztrne/C97wine85C2vec+L3vSqd73sba973wvf+Mp3vvStr33vi9/86ne//O2vf/8L4AALeMAELrCBD4zgBCt4wQxusIMfDOEIS3jCFK6whS+M4QxreMMc7rCHPwziEIt4xCQusYlPjOIUq3jFLG6xi18M4xjLeMY0rrGNb4zjHOt4xzzusY9/DOQgC3nIRC6ykY+M5CQreclMbrKTnwzlKEt5ylSuspWvjOUsa3nLXO6yl78M5jCLecxkLrOZz4zmNKt5zWxus5vfDOc4y3nOdK6zne+M5zzrec987rOf/wzoQAt60IQutP+hD43oRCt60YxutKMfDelIS3rSlK60pS+N6UxretOc7rSnPw3qUIt61KQutalPjepUq3rVrG61q18N61jLeta0rrWtb43rXOt617zuta9/DexgC3vYxC62sY+N7GQre9nMbraznw3taEt72tSutrWvje1sa3vb3O62t78N7nCLe9zkLre5z43udKt73exut7vfDe94y3ve9K63ve+N73zre9/87re//w3wgAt84AQvuMEPjvCEK3zhDG+4wx8O8YhLfOIUr7jFL47xjGt84xzvuMc/DvKQi3zkJC+5yU+O8pSrfOUsb7nLXw7zmMt85jSvuc1vjvOc63znPO+5z3/2DvSgC33oRC+60Y+O9KQrfelMb7rTnw71qEt96lSvutWvjvWsa33rXO+6178O9rCLfexkL7vZz472tKt97Wxvu9vfDve4y33udK+73e+O97zrfe9877vf/w74wAt+8IQvvOEPj/jEK37xjG+84x8P+chLfvKUr7zlL4/5zGt+85zvvOc/D/rQi370pC+96U+P+tSrfvWsb73rXw/72Mt+9rSvve1vj/vc6373vO+9738P/OALf/jEL77xj4/85Ct/+cxvvvOfD/3oS3/61K++9a+P/exrf/vc7773vw/+8It//OQvv/nPj/70q3/97G+/+9/P3AIAADs='><div slot='-1'><div><br></div></div><field-part part=field type=scrolling topleft=6,0 width=634 height=474 id=1 textsize=10 textstyle='' textalign=left script='on closeField
	set theÂ textArrows to false
	end closeField

	on exitField
	set the textArrows to false
	end exitField

	on openField
	set the textArrows to true
	end openField' name=SimScript dontwrap=true autoselect=true textfont=Monaco class='' showlines=true widemargins=false color='#FFFFFF'><div class=selected><div><div>-- Messages are sent to buttons, fields, cards, backgrounds, and stacks.</div><div>-- The targets can catch them in script handlers. If they are not caught,</div><div>-- they are sent down the message path to their containing cards and backgrounds, and then the stack.</div><div><br></div><div><div>-------------------------------- begin OpenXTalk additions -----------------------------------------------------------------</div><div>function userAgent</div><div>-- full userAgent info:</div><div>return window.navigator.userAgent;</div><div>end userAgent</div><div><br></div><div>function userLanguage</div><div>return navigator.language;</div><div>end userLanguage</div><div><br></div><div>function isOnline</div><div>return navigator.onLine;</div><div>end isOnline</div><div><br></div><div>function platform</div><div>return navigator.platform;</div><div>end platform</div><div><br></div><div>-- you can get or set properties</div><div>on setBackDrop pColor</div><div>result = document.body.style.background = pColor ;</div><div>end setBackDrop</div><div><br></div><div>function backDrop</div><div>return document.body.style.background;</div><div>end backDrop</div><div><br></div><div>function gamePadAPIAvailable</div><div>return ("gamepad" in navigator)</div><div>end gamePadAPIAvailable</div><div><br></div><div>function webMIDIAvailable</div><div>-- return ('midi' in navigator);</div><div>if(typeof(window.requestMIDIAccess)!="undefined"){</div><div>Â  Â  Â return false</div><div>}else{</div><div>Â  Â  Â return true</div><div>}</div><div>end webMIDIAvailable</div><div><br></div><div><br></div><div>function isFileReaderAvailable</div><div>if('FileReader' in window);</div><div>Â  console.log('FileReader found');</div><div>else</div><div>Â  console.log('FileReader not found');</div><div>end if</div><div>end isFileReaderAvailable</div><div><br></div><div>on launchURL pURL</div><div>put char 1 to 8 of pURL into tTemp</div><div>if tTemp contains "https://" then</div><div>Â  var a = document.createElement('a');</div><div>Â  a.href = encodeURI(pURL);</div><div>Â  a.click();</div><div>else</div><div>Â  Â put "https://" before pURL</div><div>Â  Â var a = document.createElement('a');</div><div>Â  Â a.href = encodeURI(pURL);</div><div>Â  Â a.click();</div><div>end if</div><div>end launchURL</div><div><br></div><div>function systemAppearance</div><div>-- check for darkMode:</div><div>if the darkMode is true then</div><div>Â  Â return "dark"</div><div>else</div><div>Â  Â return "light"</div><div>end if</div><div>end systemAppearance</div><div><br></div><div>function darkMode</div><div>return window.matchMedia('(prefers-color-scheme:dark)').matches;</div><div>end darkMode</div><div><br></div><div>-- basic clipboard write access:-- result = navigator.clipboard.writeText("Hello Clipboard!");</div><div>--- get our console-like text area (in the OXT Emscripten Engine wrapper webpage):-- result = document.getElementById('output').value;</div><div>--------------------------------- end OpenXTalk additions ---------------------------------</div></div><div><br></div><div>-- when the mouse (or finger) is pressed in the stack:</div><div>on mouseDown</div><div>Â  Â -- when the click or touch starts on a button, field, or card</div><div>end mouseDown</div><div><br></div><div>on mouseStillDown</div><div>Â  Â -- while the mouse continues the click</div><div>end mouseStillDown</div><div><br></div><div>on mouseUp</div><div>Â  Â -- when the mouse or finger releases the clickend mouseUp</div><div>on mouseEnter</div><div>Â  Â  Â -- when the mouse enters a button, field, or card</div><div>end mouseEnter</div><div><br></div><div>on mouseWithin</div><div>Â  Â -- while the mouse remains inside</div><div>end mouseWithin</div><div><br></div><div>on mouseLeave</div><div>Â  Â -- when the mouse leaves the part</div><div>end mouseLeave</div><div><br></div><div>-- these message sent while the stack is navigated: openStack, openBackground, openCard, closeCard, closeBackground, closeStack</div><div>on openStack</div><div>Â  Â -- when a stack is opened, this message is sent</div><div>end openStack</div><div><br></div><div>on openBackground</div><div>Â  Â -- when the background changes, this message is sent</div><div>end openBackground</div><div><br></div><div>on openCard</div><div>Â  Â -- when the card changes, this message is sent</div><div>end openCard</div><div><br></div><div>on closeCard</div><div>Â  Â -- this message is sent to the closing card before the next one gets openCard</div><div>end closeCard</div><div><br></div><div>on closeBackground</div><div>Â  Â -- this message is sent to the closing background.</div><div>end closeBackground</div><div><br></div><div>on closeStack</div><div>Â  Â -- this message is sent to the stack when closing.</div><div>end closeStack</div><div><br></div><div>-- these messages are sent when the selection focus moves.</div><div>on openField</div><div>Â  Â -- this message is sent to a field when editing begins.</div><div>end openField</div><div><br></div><div>on closeField</div><div>Â  Â -- this message is sent to a field when editing ends and the contents have changed.</div><div>end closeField</div><div><br></div><div>on exitField</div><div>Â  Â -- this message is sent to the card when editing ends and the contents have NOT changed.</div><div>end exitField</div><div><br></div><div>-- these messages are sent when the keyboard is used in the stack.</div><div>on keyDown which</div><div>Â  Â -- sent when a keyboard key is pressed</div><div>Â  Â put charToNum(which) into ascii</div><div>Â  Â put word 2 of the target is "field" into targetIsField</div><div>Â  Â if ascii is 28 and not (targetIsField and the textArrows) then send "arrowKey left" to the target</div><div>Â  Â else if ascii is 29 and not (targetIsField and the textArrows) then send "arrowKey right" to the target</div><div>Â  Â else if ascii is 30 and not (targetIsField and the textArrows) then end "arrowKey up" to the target</div><div>Â  Â else if ascii is 31 and not (targetIsField and the textArrows) then send "arrowKey down" to the target</div><div>Â  Â else if ascii is 9 then send "tabKey" to the target</div><div>Â  Â else if (ascii is 10 or ascii is 13) and targetIsField then send "returnInField" to the target</div><div>Â  Â else if (ascii is 10 or ascii is 13) and not targetIsField then send "returnKey" to the target</div><div>Â  Â else if the blindTyping then</div><div>Â  Â  Â  if (!document.activeElement || document.activeElement.matches('div,field-part,card-part') || !window.messagebox_input || !(/[a-zA-ZÃ-Å¾_0-9]/).test(which)) return;</div><div>Â  Â  Â  Â  Â  \nput which getSelection().selectAllChildren(window.messagebox_input);</div><div>Â  Â  Â  Â  Â  getSelection().collapseToEnd();</div><div>Â  Â end if</div><div>end keyDown</div><div><br></div><div>on arrowKey which</div><div>Â  Â -- arrowKey is sent when you push an arrow key on the keyboard, but not in a field when the textArrows is true</div><div>Â  Â if which is left then go previous card</div><div>Â  Â else if which is right then go next card</div><div>Â  Â else if which is down then go back</div><div>Â  Â else if which is up then go forth</div><div>Â  Â else</div><div>Â  Â  Â  throw "Can't understand arguments of arrowKey.";</div><div>Â  Â end if</div><div>end arrowKey</div><div><br></div><div>on returnInField</div><div>Â  Â -- sent when you press return in a field</div><div>end returnInField</div><div><br></div><div>on returnKey</div><div>Â  Â -- sent when you press return but not in a field.</div><div>end returnKey</div><div><br></div><div>on tabKey</div><div>Â  Â -- sent when you press tab</div><div>end tabKey</div><div><br></div><div>on idle</div><div>Â  Â -- this message will be sent repeatedly to the current card</div><div>end idle</div><div><br></div><div>-- and here are some handlers you can use by typing their name in the message box.</div><div>on help</div><div>Â  Â go home</div><div>Â  Â sim.stack.card = this.selectOf('card-part', 'name', "What was HyperCard?", sim.stack);</div><div>end help</div><div><br></div><div>on sampleMessage</div><div>Â  Â answer "The simulator script sees the message" with "end sampleMessage"</div><div>end sampleMessage</div><div><br></div><div>on myHandler</div><div>Â  Â -- and you can write your own. just type it here</div><div>Â  Â -- or in the script of a part of the stack</div><div>Â  Â put "I'm writing a handler!" into greeting</div><div>Â  Â answer greeting</div><div>end myHandler</div><div><br></div><div>on FizzBuzz</div><div>Â  Â -- a famous homework problem</div><div>Â  Â get empty</div><div>Â  Â repeat with n=1 to 100</div><div>Â  Â  Â  if it is not empty then</div><div>Â  Â  Â  Â put return after it</div><div>Â  Â  Â  if n mod 3 is not 0 and n mod 5 is not zero then</div><div>Â  Â  Â put n after it</div><div>Â  Â  Â next repeat</div><div>Â  Â end if</div><div>Â  Â  Â if n mod 3 is 0 then put Fizz after it</div><div>Â  Â  Â if n mod 5 is 0 then put Buzz after it</div><div>Â  Â end repeat</div><div>Â  Â put it</div><div>end fizzbuzz</div><div><br></div><div>-- you can also write functions like the square of five or the sqrt(9+9)</div><div>function square y</div><div>Â  Â return y times y</div><div>end square</div><div><br></div><div>function sqrt n</div><div>Â  Â return the abs of n ^0.5</div><div>end sqrt</div><div><br></div><div>-- You can mix in lines of JavaScript.</div><div>function random n</div><div>Â  Â return Math.floor(Math.random()*number(n)) + 1;</div><div>end random</div><div><br></div><div>function round n</div><div>Â  Â return Math.round(number(n));</div><div>end round</div><div><br></div><div>function abs n</div><div>Â  Â return Math.abs(number(n));</div><div>end abs</div><div><br></div><div>function trunc n</div><div>Â  Â return Math.floor(Math.abs(number(n))) * Math.sign(n);</div><div>end trunc</div><div><br></div><div>function length ofStr</div><div>Â  Â return the number of chars in ofStr</div><div>end length</div><div><br></div><div>function max</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return Math.max.apply(null, flattened);</div><div>end max</div><div><br></div><div>function min</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return Math.min.apply(null, flattened);</div><div>end min</div><div><br></div><div>function sum</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return flattened.reduce((partial,a) =&gt; partial+a, 0);</div><div>end sum</div><div><br></div><div>function average</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return flattened.reduce((partial,a) =&gt; partial+a, 0) / flattened.length;</div><div>end average</div><div><br></div><div>function annuity rate, periods</div><div>Â  Â return (1 - (1 + rate) ^ -periods) / rate</div><div>end annuity</div><div><br></div><div>function compound rate, periods</div><div>Â  Â return (1 + rate) ^ periods</div><div>end compound</div><div><br></div><div>function ln value</div><div>Â  Â return Math.log(value);</div><div>end ln</div><div><br></div><div>function ln1 value</div><div>Â  Â return Math.log1p(value);</div><div>end ln1</div><div><br></div><div>function log2 value</div><div>Â  Â return Math.log2(value);</div><div>end log2</div><div><br></div><div>function exp value</div><div>Â  Â return Math.exp(value);</div><div>end exp</div><div><br></div><div>function exp1 value</div><div>Â  Â return Math.expm1(value);</div><div>end exp1</div><div><br></div><div>function exp2 value</div><div>Â  Â return 2 ^ value</div><div>end exp2</div><div><br></div><div>function sin theta</div><div>Â  Â return Math.sin(number(theta));</div><div>end sin</div><div><br></div><div>function cos theta</div><div>Â  Â return Math.cos(number(theta));</div><div>end cos</div><div><br></div><div>function tan theta</div><div>Â  Â return Math.tan(number(theta));</div><div>end tan</div><div>function atan theta</div><div>Â  Â return Math.atan(number(theta));</div><div>end atan</div><div><br></div><div>function date</div><div>Â  Â return new Date().toLocaleDateString();</div><div>end date</div><div><br></div><div>function time</div><div>Â  Â return new Date().toLocaleTimeString();</div><div>end time</div><div><br></div><div>function ticks</div><div>Â  Â return Math.floor(Date.now() / 1000 * 60);</div><div>end ticks</div><div><br></div><div>function seconds</div><div>Â  Â return Math.floor(Date.now() / 1000);</div><div>end seconds</div><div><br></div><div>function secs</div><div>Â  Â return the seconds</div><div>end secs</div><div><br></div><div>function stacksInUse</div><div>Â  Â return empty</div><div>end stacksInUse</div><div><br></div><div>on put message</div><div>Â  Â window.put_into_messagebox ? put_into_messagebox(message,true) : console.log(message);</div><div>end put</div><div><br></div><div>function charToNum c</div><div><br></div><div>Â  Â return String(c).codePointAt(0);</div><div>end charToNum</div><div><br></div><div>function numToChar n</div><div>Â  Â return String.fromCodePoint(n);</div><div>end numToChar</div><div><br></div><div>-- you can get or set properties</div><div>function cursorÂ </div><div>Â  Â return document.body.style.cursor ;</div><div>end cursor</div><div><br></div><div>on setCursor pCursorName</div><div>Â  Â if pCursorName is in "alias,all-scroll,auto,cell,context-menu,col-resize,copy,crosshair,default,e-resize,ew-resize,grab,grabbing,help,move,n-resize,ne-resize,nesw-resize,ns-resize,nw-resize,nwse-resize,no-drop,none,not-allowed,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,auto,vertical-text,w-resize,wait,zoom-in,zoom-out,initial" then</div><div>Â  Â  Â  result = document.body.style.cursor = pCursorName ;</div><div>Â  Â else</div><div>Â  Â  Â  exit setCursor</div><div>Â  Â end if</div><div>end setCursor</div><div><br></div><div>function textArrows</div><div>Â  Â return body.classList.contains('arrow-keys-in-text');</div><div>end textArrows</div><div><br></div><div>on setTextArrows value</div><div>Â  Â body.classList.toggle('arrow-keys-in-text', boolean(value));</div><div>end setTextArrows</div><div><br></div><div>function itemDelimiter</div><div>Â  Â return sim.itemDelimiter || ',';</div><div>end itemDelimiter</div><div><br></div><div>on setItemDelimiter newDelimiter</div><div>Â  Â sim.itemDelimiter = newDelimiter;</div><div>end setItemDelimiter</div><div><br></div><div>function mouseLoc</div><div>Â  Â return sim.mouseLoc || "0,0";</div><div>end mouseLoc</div><div><br></div><div>function mouseH</div><div>Â  Â return item 1 of the mouseLoc</div><div>end mouseH</div><div><br></div><div>function mouseV</div><div>Â  Â return item 2 of the mouseLoc</div><div>end mouseV</div><div><br></div><div>function clickLoc</div><div>Â  Â return sim.clickLoc || "0,0";</div><div>end clickLoc</div><div><br></div><div>function clickH</div><div>Â  Â return item 1 of the clickLoc</div><div>end clickH</div><div><br></div><div>function clickV</div><div>Â  Â return item 2 of the clickLoc</div><div>end clickV</div><div><br></div><div>function clickText</div><div>Â  Â return sim.clickText || '';</div><div>end clickText</div><div><br></div><div>function clickLine</div><div>Â  Â return sim.clickLine || '';</div><div>end clickLine</div><div><br></div><div>function mouse</div><div>Â  Â return sim.mouse || 'up';</div><div>end mouse</div><div><br></div><div>function mouseClick</div><div>Â  Â if (!this.stackOf().mouseClick) return false;</div><div>Â  Â this.stackOf().mouseClick = false;</div><div>Â  Â wait until the mouse is up</div><div>Â  Â return true</div><div>end mouseClick</div><div><br></div><div>function screenRect</div><div>Â  Â return String([0,0,stackcontainer.offsetWidth,stackcontainer.offsetHeight]);</div><div>end screenRect</div><div><br></div><div>function shiftKey</div><div>Â  Â return body.classList.contains('shift') ? 'down' : 'up';</div><div>end shiftKey</div><div><br></div><div>function commandKey</div><div>Â  Â return body.classList.contains('command') ? 'down' : 'up';</div><div>end commandKey</div><div><br></div><div>function optionKey</div><div>Â  Â return body.classList.contains('option') ? 'down' : 'up';</div><div>end optionKey</div><div><br></div><div>function sound</div><div>Â  Â return sim.sound || 'done';</div><div>end sound</div><div><br></div><div>function offset needle, haystack</div><div>Â  Â return String(haystack).toLowerCase().indexOf(String(needle).toLowerCase()) + 1;</div><div>end offset</div><div><br></div><div>on setPattern what</div><div>Â  Â if what is an integer then</div><div>Â  Â  Â  set_gray_pattern('ui-patterns/PAT128_'+(sim.pattern=(what-1))+'.png');</div><div>Â  Â  Â  while (!grayPngImg.complete)</div><div>Â  Â  {</div><div>Â  Â  Â wait 1 tick</div><div>Â  Â  Â console.log('waiting for pattern '+what+' to load from server');</div><div>Â  Â  }</div><div>Â  Â  Â if (window.patternz) { window.patternz.style.setProperty('--pattern-x', Math.floor((what-1)/10));</div><div>Â  Â  Â  window.patternz.style.setProperty('--pattern-y', (what-1)%10); }</div><div>Â  Â end if</div><div>end setPattern</div><div><br></div><div>function pattern</div><div>Â  Â return sim.pattern || 32;</div><div>end pattern</div><div><br></div><div>on setLineSize value</div><div>Â  Â sim.lineSize = number(value);</div><div>end setLineSize</div><div><br></div><div>function lineSize</div><div>Â  Â return sim.lineSize || 1;</div><div>end lineSize</div><div><br></div><div>on setBlindTyping</div><div>end setBlindTyping</div><div><br></div><div>function blindTyping</div><div>Â  Â return true</div><div>end blindTyping</div><div><br></div><div>on setBrush</div><div>end setBrush</div><div><br></div><div>function brush</div><div>Â  Â return 8</div><div>end brush</div><div><br></div><div>on setNumberFormat</div><div>end setNumberFormat</div><div><br></div><div>function numberFormat</div><div>end numberFormat</div><div><br></div><div>on setLockRecent</div><div>end setLockRecent</div><div><br></div><div>function lockRecent</div><div>end lockRecent</div><div><br></div><div>on setPowerKeys</div><div>end setPowerKeys</div><div><br></div><div>function powerKeys</div><div>end powerKeys</div><div><br></div><div>on setLockScreen value</div><div>Â  Â XTalkQueue.Active.queue[0].options.TemporaryLongSlices = boolean(value);</div><div>end setLockScreen</div><div><br></div><div>function lockScreen</div><div>Â  Â return !!XTalkQueue.Active.queue[0].options.TemporaryLongSlices;</div><div>end lockScreen</div><div><br></div><div>on setSoundChannel value</div><div>Â  Â xtalk_sound_channel = number(value);</div><div>end setSoundChannel</div><div><br></div><div>function soundChannel</div><div>Â  Â return xtalk_sound_channel;</div><div>end soundChannel</div><div><br></div><div>on setUserModify</div><div>end setUserModify</div><div><br></div><div>function userModify</div><div>end userModify</div><div><br></div><div>on setUserLevel</div><div>end setUserLevel</div><div><br></div><div>function userLevel</div><div>Â  Â return 5</div><div>end userLevel</div><div><br></div><div>on setGrid</div><div>end setGrid</div><div><br></div><div>function Grid</div><div>end Grid</div><div><br></div><div>on setDragSpeed</div><div>end setDragSpeed</div><div><br></div><div>function dragSpeed</div><div>Â  Â return 0</div><div>end dragSpeed</div><div><br></div><div>on setFilled what</div><div>Â  Â sim.stack.classList.toggle('filled', boolean(what));</div><div>end setFilled</div><div><br></div><div>function filled</div><div>Â  Â return sim.stack.classList.contains('filled');</div><div>end filled</div><div><br></div><div>on setTextFont what</div><div>Â  Â painttext_proxy.textFont = what;</div><div>end setTextFont</div><div><br></div><div>function textFont</div><div>Â  Â return painttext_proxy.textFont;</div><div>end textFont</div><div><br></div><div>on setTextSize what</div><div>Â  Â painttext_proxy.textSize = what;</div><div>end setTextSize</div><div><br></div><div>function textSize</div><div>Â  Â return painttext_proxy.textSize;</div><div>end textSize</div><div><br></div><div>on setTextHeight what</div><div>Â  Â painttext_proxy.textHeight = what;</div><div>end setTextHeight</div><div><br></div><div>function textHeight</div><div>Â  Â return painttext_proxy.textHeight;</div><div>end textHeight</div><div><br></div><div>on setTextAlign what</div><div>Â  Â painttext_proxy.textAlign = what;</div><div>end setTextAlign</div><div><br></div><div>function textAlign</div><div>Â  Â return painttext_proxy.textAlign;</div><div>end textAlign</div><div><br></div><div>on setTextStyle what</div><div>Â  Â painttext_proxy.textStyle = what;</div><div>end setTextStyle</div><div><br></div><div>function textStyle</div><div>Â  Â return painttext_proxy.textStyle;</div><div>end textStyle</div><div><br></div><div>on setLockMessages value</div><div>Â  Â sim.lockMessages = boolean(value);</div><div>end setLockMessages</div><div><br></div><div>function lockMessages</div><div>Â  Â return !!sim.lockMessages;</div><div>end lockMessages</div><div><br></div><div>on setLockErrorDialogs value</div><div>end setLockErrorDialogs</div><div><br></div><div>function lockErrorDialogs</div><div>Â  Â return false</div><div>end lockErrorDialogs</div><div><br></div><div>on setEditBkgnd value</div><div>Â  Â if (boolean(value) != sim.stack.classList.contains('background-mode')) body.qs('#background-mode').click();</div><div>end setEditBkgnd</div><div><br></div><div>function editBkgnd</div><div>Â  Â return sim.stack.classList.contains('background-mode');</div><div>end editBkgnd</div><div><br></div><div>function windows</div><div>end windows</div><div><br></div><div>function stacks</div><div>end stacks</div><div><br></div><div>function menus</div><div>Â  Â return Array.from(this.stackOf().parentNode.menubar.qsa('title-bar-menu')).map((tbm)=&gt;tbm.name).join('\n');</div><div>end menus</div><div><br></div><div>function voices</div><div>end voices</div><div><br></div><div>function suspended</div><div>Â  Â return false</div><div>end suspended</div><div><br></div><div>function diskSpace</div><div>Â  Â  Â return 2^20</div><div>end diskSpace</div><div><br></div><div>function heapSpace</div><div>Â  Â  Â return 2^20</div><div>end heapSpace</div><div><br></div><div>function version</div><div>Â  Â  Â get the shortVersion of the stack</div><div>Â  Â  Â if it is a number then return it</div><div>Â  Â  Â return 2.41</div><div>end version</div><div><br></div><div>function longVersion</div><div>Â  Â  Â return "0" & (the version * 100) & "8000"</div><div>end longVersion</div><div><br></div><div>function systemVersion</div><div>Â  Â  Â return 6.08</div><div>end systemVersion</div><div><br></div><div>on doMenu what</div><div>Â  Â if what contains "New Stack" then newstack.click();</div><div>Â  Â else if what contains "New Card" then sim.stack.newCard();</div><div>Â  Â else if what contains "New Background" then sim.stack.newCard(true);</div><div>Â  Â else if what contains "New Button" then body.qs('#toolbarvert button-part[name="New Button" i]').click();</div><div>Â  Â else if what contains "New Field" then body.qs('#toolbarvert button-part[name="New Field" i]').click();</div><div>Â  Â else if what contains "Stack Info" then launch_info_dialog(sim.stack);</div><div>Â  Â else if what contains "Import Stack" then importstack.click();</div><div>Â  Â else if what contains "Message" then</div><div>Â  Â  Â  if (document.getElementById('messagebox-visible')) document.getElementById('messagebox-visible').click();</div><div>Â  Â else if what contains "Help" then help</div><div>Â  Â else if what contains "first" then go first</div><div>Â  Â else if what contains "prev" then go prev</div><div>Â  Â else if what contains "next" then go next</div><div>Â  Â else if what contains "last" then go last</div><div>Â  Â else if what contains "home" then go home</div><div>Â  Â else if what contains "back" then go back</div><div>Â  Â else</div><div>Â  Â  Â  put "doMenu" && what</div><div>Â  Â  Â  log "doMenu" && what</div><div>Â  Â end if</div><div>end doMenu</div><div><br></div><div>on select selPart</div><div>Â  Â if (selPart instanceof HTMLElement) { if (sim.stackOf(selPart)===sim.stack) sim.selectOf('#toolbar button-part', '', selPart.matches('field-part') ? 'Field' : 'Button', body).click(); sim.stackOf(selPart).selectedPart = selPart; return; }</div><div>Â  Â if (!String(selPart)) { this.stackOf().focus(); return; }</div><div>Â  Â if word 1 of selPart is "line" and word 2 of selPart is an integer and word 3 of selPart is "of" then do "select" && selPart</div><div>end select</div><div><br></div><div>function selectedField</div><div>Â  Â  Â return empty</div><div>end selectedField</div><div><br></div><div>on answer _parent, promptText, firstButton, secondButton, thirdButton</div><div>Â  Â  -- answer "Answer?" with yes or NO</div><div>Â  Â  -- the button choice will be in the variable It</div><div>Â  Â var xtqa = XTalkQueue.Active;</div><div>Â  Â yield (launch_answer_dialog((result)=&gt;{ _parent.it = answerdialog.button_result; xtqa.resume();</div><div>Â  Â  }, promptText, firstButton, secondButton, thirdButton), {timeout: 2**32});</div><div>end answer</div><div><br></div><div>on ask _parent, promptText, initialText</div><div>Â  Â -- ask "Input something?" with "the default text"</div><div>Â  Â -- the user's text will be in the variable It</div><div>Â  Â var xtqa = XTalkQueue.Active;</div><div>Â  Â yield (launch_ask_dialog((result)=&gt;{ _parent.the_result = askdialog.button_result; _parent.it = askdialog.text_result;</div><div>Â  Â xtqa.resume(); }, promptText, initialText), {timeout: 2**32});</div><div>end ask</div><div><br></div><div>on choose it</div><div>Â  Â if it is a number then get item it of "browse,button,field,select,lasso,pencil,brush,eraser,line,spray,rectangle,round rect,bucket,oval,curve,text,regular polygon,polygon"</div><div>Â  Â if last word of it is "tool" then delete last word of it</div><div>Â  Â if it is "rect" then get "rectangle"</div><div>Â  Â if it is "round rectangle" then get "round rect"</div><div>Â  Â if it is "poly" then get "polygon"</div><div>Â  Â if it is "spray can" then get "spray"</div><div>Â  Â if it is "regular poly" or it is "reg poly" or it is "reg polygon" then get "regular polygon"</div><div>Â  Â var bodytool = body.qs('#toolbar button-part[name="' + _.it.trim() + '" i]');</div><div>Â  Â if (bodytool) bodytool.click();</div><div>Â  Â else this.stackOf().tool = _.it;</div><div>end choose</div><div><br></div><div>on beep count</div><div>Â  Â if count is empty then put 1 into count</div><div>Â  Â get empty</div><div>Â  Â repeat with x=1 to count</div><div>Â  Â  Â  put " c" after it</div><div>Â  Â end repeat</div><div>Â  Â play beep tempo 300 it</div><div>end beep</div><div><br></div><div>on play first, notes</div><div>Â  Â if (first=='stop') kill_audio(); else perform_classic_play_command(first, notes);</div><div>end play</div><div><br></div><div>on speak text, voice</div><div>Â  Â window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));</div><div>end speak</div><div><br></div><div>function speech</div><div>Â  Â  Â return window.speechSynthesis.speaking ? 'speaking' : 'done';</div><div>end speech</div><div><br></div><div>on goToStack target</div><div>Â  Â if target is "Home" then</div><div>Â  Â  Â  go home</div><div>Â  Â  Â  exit goToStack</div><div>Â  Â end if</div><div>Â  Â target = String(target).replaceAll(':','/').replaceAll(/[^\w\/]/g,'-');</div><div>Â  Â var levels = 0; while (target[levels]=='/') levels++;</div><div>Â  Â if (levels) { var md = this.stackOf().parentNode; target = (md.dataset.user?md.dataset.user+'/':'')+((md.dataset.path||'').split('/').slice(0,-levels).join('/'))+target.substr(levels-1); }</div><div>Â  Â  console.log('going to stack ' + tickedString(target) + ' from stack ' + tickedString(sim.stack.name));</div><div>Â  Â var userpath = target.split('/');</div><div>Â  Â if (userpath.length &gt; 1) { download_user_stack(userpath.shift(),userpath.join('/')); }</div><div>Â  Â else { download_user_stack('',target); }</div><div>end goToStack</div><div><br></div><div>on showCards howMany</div><div>Â  Â set the lockMessages to true</div><div>Â  Â if howMany is not an integer then put the number of cards into howMany</div><div>Â  Â repeat howMany</div><div>Â  Â  Â  wait 5 ticks</div><div>Â  Â  Â  go next card</div><div>Â  Â end repeat</div><div>Â  Â set the lockMessages to false</div><div>end showCards</div><div><br></div><div>on sendToMe bugReport</div><div>Â  Â var a = document.createElement('a');</div><div>Â  Â a.href = "mailto:dan@hypervariety.com?body=" + encodeURI(bugReport);</div><div>Â  Â a.click();</div><div>end sendToMe</div><div><br></div><div>on setMagnifyStacks value</div><div>Â  Â body.classList.toggle('dont-magnify-stacks', !boolean(value));</div><div>Â  Â if (!boolean(value)) body.classList.remove('fullscreen');</div><div>Â  Â modalresizer();</div><div>end setMagnifyStacks</div><div><br></div><div>function magnifyStacks</div><div>Â  Â return !body.classList.contains('dont-magnify-stacks') || body.classList.contains('fullscreen');</div><div>end magnifyStacks</div><div><br></div><div>function rj_list_icons</div><div>Â  Â return Array.from(JSON.parse(this.stackOf().importedICONResources||'[]')).map((i)=&gt;(i.ID + ' ' + i.name)).join('\n');</div><div>end rj_list_icons</div><div><br></div><div>function rj_retrieve_icon id</div><div>Â  Â var icon = JSON.parse(sim.stack.importedICONResources||'[]').find((i)=&gt;i.ID==id);</div><div>Â  Â if (!icon) return '';</div><div>Â  Â return atob(icon.data).split('').map((p)=&gt;[(p=p.charCodeAt(0))&amp;128,p&amp;64,p&amp;32,p&amp;16,p&amp;8,p&amp;4,p&amp;2,p&amp;1]).flat().map((b)=&gt;b?1:0).join('');</div><div>end rj_retrieve_icon</div><div><br></div><div>on rj_store_icon id, withName, bits</div><div>Â  Â if the length of bits is not 32^2 then return "Icons are 1024 chars long, 0 for white, 1 for black"</div><div>Â  Â var icons = JSON.parse(sim.stack.importedICONResources||'[]'), icon = icons.find((i)=&gt;i.ID==id);</div><div>Â  Â if (!icon) icons.push(icon={ ID:id });</div><div>Â  Â icon.name = withName;</div><div>Â  Â icon.data = "";</div><div>Â  Â for (var b=0; b &lt; bits.length; b += 8) icon.data += String.fromCharCode(((bits[b+0]==0)?0:128)+((bits[b+1]==0)?0:64)+((bits[b+2]==0)?0:32)+((bits[b+3]==0)?0:16)+((bits[b+4]==0)?0:8)+((bits[b+5]==0)?0:4)+((bits[b+6]==0)?0:2)+((bits[b+7]==0)?0:1));</div><div>Â  Â icon.data = btoa(icon.data);</div><div>Â  Â this.stackOf().importedICONResources = JSON.stringify(icons);</div><div>Â  Â delete this.stackOf().importedICONImages;</div><div>end rj_store_icon</div><div><br></div><div>function rj_large_icon bits, size, gap</div><div>Â  Â size = number(size);</div><div>Â  Â gap = number(gap);</div><div>Â  Â var workcanvas = document.createElement('canvas');</div><div>Â  Â workcanvas.width = workcanvas.height = (size+gap)*32;</div><div>Â  Â  Â var ctx = workcanvas.getContext('2d');</div><div>Â  Â  Â ctx.fillStyle = 'white';</div><div>Â  Â  Â ctx.fillRect(0,0,workcanvas.width,workcanvas.height);</div><div>Â  Â  Â ctx.fillStyle = 'black';</div><div>Â  Â  Â for (var i = 0; i &lt; bits.length; i++)</div><div>Â  Â  Â {</div><div>Â  Â  Â  if (bits[i]=='1') ctx.fillRect((size+gap)*(i%32), (size+gap)*Math.floor(i/32), size, size);</div><div>Â  Â  Â  }</div><div>Â  Â  Â return workcanvas.toDataURL('image/gif');</div><div>end rj_large_icon</div></div><div><br></div><br></div></field-part><button-part name=GoBack topleft='-2,473' width=27 height=31 id=2 showname=false icon=28810 script='on mouseUp
	visual effect wipe right fast
	go prev
	end mouseUp
	'>-- Messages are sent to buttons, fields, cards, backgrounds, and stacks. The targets can catch them in script handlers. If they are not caught, they are sent down the message path to their containing cards and backgrounds, and then the stack.-------------------------------- begin OpenXTalk additions -----------------------------------------------------------------function userAgentÂ  Â -- full userAgent info:Â  Â return window.navigator.userAgent;end userAgentfunction userLanguageÂ  Â return navigator.language;end userLanguagefunction platformÂ  Â --- var thePlatform = navigator.platform;Â  Â --- if char 1 to 3 of thePlatform = "Mac" thenÂ  Â --- Â  Â return "MacOS"Â  Â --- end ifÂ  Â --- if thePlatform is "iPhone" or thePlatform is "iPad" or thePlatform is "iPod" Â thenÂ  Â --- Â  Â return "iOS"Â  Â --- end ifÂ  Â --- if char 1 to 3 of thePlatform = "Win" then Â --- Â  Â return "Windows"Â  Â --- end ifÂ  Â return navigator.platform;end platform-- you can get or set propertieson setBackDrop pColorÂ  result = document.body.style.background = pColor ;end setBackDropon backDrop pColorÂ  Â return document.body.style.background;end backDropfunction gamePadAPIAvailableÂ  Â return ("gamepad" in navigator)end gamePadAPIAvailablefunction webMIDIAvailableÂ  Â return ("webmidi" in navigator)end webMIDIAvailableon launchURL pURLÂ  Â put char 1 to 8 of pURL into tTempÂ  Â if tTemp contains "https://" thenÂ  Â  Â  var a = document.createElement('a');Â  Â  Â  a.href = encodeURI(pURL);Â  Â  Â  a.click();Â  Â elseÂ  Â  Â  put "https://" before pURLÂ  Â  Â  var a = document.createElement('a');Â  Â  Â  a.href = encodeURI(pURL);Â  Â  Â  a.click();Â  Â end ifend launchURLfunction systemAppearanceÂ  Â -- check for darkMode:Â  Â if the darkMode is true thenÂ  Â  Â  return "dark"Â  Â elseÂ  Â  Â  return "light"Â  Â end ifend systemAppearancefunction darkModeÂ  Â return window.matchMedia('(prefers-color-scheme:dark)').matches;end darkMode-- basic clipboard write access:-- result = navigator.clipboard.writeText("Hello Clipboard!");--- get the console-like text area:-- result = document.getElementById('output').value;--------------------------------- end OpenXTalk additions ----------------------------------- when the mouse (or finger) is pressed in the stack:on mouseDown-- when the click or touch starts on a button, field, or cardend mouseDownon mouseStillDownÂ  Â -- while the mouse continues the clickend mouseStillDownon mouseUpÂ  Â -- when the mouse or finger releases the clickend mouseUpon mouseEnterÂ  -- when the mouse enters a button, field, or cardend mouseEnteron mouseWithin-- while the mouse remains insideend mouseWithinon mouseLeave-- when the mouse leaves the partend mouseLeave-- these message sent while the stack is navigated: openStack, openBackground, openCard, closeCard, closeBackground, closeStackon openStackÂ  Â -- when a stack is opened, this message is sentend openStackon openBackgroundÂ  Â -- when the background changes, this message is sentend openBackgroundon openCardÂ  Â -- when the card changes, this message is sentend openCardon closeCard-- this message is sent to the closing card before the next one gets openCardend closeCardon closeBackground-- this message is sent to the closing background.end closeBackgroundon closeStack-- this message is sent to the stack when closing.end closeStack-- these messages are sent when the selection focus moves.on openField-- this message is sent to a field when editing begins.end openFieldon closeField-- this message is sent to a field when editing ends and the contents have changed.end closeFieldon exitField-- this message is sent to the card when editing ends and the contents have NOT changed.end exitField-- these messages are sent when the keyboard is used in the stack.on keyDown whichÂ  Â -- sent when a keyboard key is pressedÂ  Â put charToNum(which) into asciiÂ  Â put word 2 of the target is "field" into targetIsFieldÂ  Â if ascii is 28 and not (targetIsField and the textArrows) then send "arrowKey left" to the targetÂ  Â else if ascii is 29 and not (targetIsField and the textArrows) then send "arrowKey right" to the targetÂ  Â else if ascii is 30 and not (targetIsField and the textArrows) then send "arrowKey up" to the targetÂ  Â else if ascii is 31 and not (targetIsField and the textArrows) then send "arrowKey down" to the targetÂ  Â else if ascii is 9 then send "tabKey" to the targetÂ  Â else if (ascii is 10 or ascii is 13) and targetIsField then send "returnInField" to the targetÂ  Â else if (ascii is 10 or ascii is 13) and not targetIsField then send "returnKey" to the targetÂ  Â else if the blindTyping thenÂ  Â  Â  if (!document.activeElement || document.activeElement.matches('div,field-part,card-part') || !window.messagebox_input || !(/[a-zA-ZÃ-Å¾_0-9]/).test(which)) return;Â  Â  Â  put whichÂ  Â  Â  getSelection().selectAllChildren(window.messagebox_input);Â  Â  Â  getSelection().collapseToEnd();Â  Â end ifend keyDownon arrowKey whichÂ  Â -- arrowKey is sent when you push an arrow key on the keyboard, but not in a field when the textArrows is trueÂ  Â if which is left then go previous cardÂ  Â else if which is right then go next cardÂ  Â else if which is down then go backÂ  Â else if which is up then go forthÂ  Â elseÂ  Â  Â  throw "Can't understand arguments of arrowKey.";Â  Â end ifend arrowKeyon returnInField-- sent when you press return in a fieldend returnInFieldon returnKey-- sent when you press return but not in a field.end returnKeyon tabKey-- sent when you press tabend tabKeyon idle-- this message will be sent repeatedly to the current cardend idle-- and here are some handlers you can use by typing their name in the message box.on helpÂ  Â go homeÂ  Â sim.stack.card = this.selectOf('card-part', 'name', "What was HyperCard?", sim.stack);end helpon sampleMessageÂ  Â answer "The simulator script sees the message" with "end sampleMessage"end sampleMessageon myHandlerÂ  Â -- and you can write your own. just type it hereÂ  Â -- or in the script of a part of the stackÂ  Â put "I'm writing a handler!" into greetingÂ  Â answer greetingend myHandleron FizzBuzzÂ  Â -- a famous homework problemÂ  Â get emptyÂ  Â repeat with n=1 to 100Â  Â  Â  if it is not emptyÂ thenÂ put return after itÂ  Â  Â  if n mod 3 is not 0 and n mod 5 is not zero thenÂ  Â  Â  Â  Â put n after itÂ  Â  Â  Â  Â next repeatÂ  Â  Â  Â end ifÂ  Â  Â if n mod 3 is 0 then put Fizz after itÂ  Â  Â if n mod 5 is 0 then put Buzz after itÂ  Â end repeatÂ  Â put itend fizzbuzz-- you can also write functions like the square of five or the sqrt(9+9)function square yÂ  Â return y times yend squarefunction sqrt nÂ  Â return the abs of n ^0.5end sqrt-- You can mix in lines of JavaScript.function random nÂ  Â return Math.floor(Math.random()*number(n)) + 1;end randomfunction round nÂ  Â return Math.round(number(n));end roundfunction abs nÂ  Â return Math.abs(number(n));end absfunction trunc nÂ  Â return Math.floor(Math.abs(number(n))) * Math.sign(n);end truncfunction length ofStrÂ  Â return the number of chars in ofStrend lengthfunction maxÂ  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();Â  Â return Math.max.apply(null, flattened);end maxfunction minÂ  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();Â  Â return Math.min.apply(null, flattened);end minfunction sumÂ  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();Â  Â return flattened.reduce((partial,a) =&gt; partial+a, 0);end sumfunction averageÂ  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();Â  Â return flattened.reduce((partial,a) =&gt; partial+a, 0) / flattened.length;end averagefunction annuity rate, periodsÂ  Â return (1 - (1 + rate) ^ -periods) / rateend annuityfunction compound rate, periodsÂ  Â return (1 + rate) ^ periodsend compoundfunction ln valueÂ  Â return Math.log(value);end lnfunction ln1 valueÂ  Â return Math.log1p(value);end ln1function log2 valueÂ  Â return Math.log2(value);end log2function exp valueÂ  Â return Math.exp(value);end expfunction exp1 valueÂ  Â return Math.expm1(value);end exp1function exp2 valueÂ  Â return 2 ^ valueend exp2function sin thetaÂ  Â return Math.sin(number(theta));end sinfunction cos thetaÂ  Â return Math.cos(number(theta));end cosfunction tan thetaÂ  Â return Math.tan(number(theta));end tanfunction atan thetaÂ  Â return Math.atan(number(theta));end atanfunction dateÂ  Â return new Date().toLocaleDateString();end datefunction timeÂ  Â return new Date().toLocaleTimeString();end timefunction ticksÂ  Â return Math.floor(Date.now() / 1000 * 60);end ticksfunction secondsÂ  Â return Math.floor(Date.now() / 1000);end secondsfunction secsÂ  Â return the secondsend secsfunction stacksInUseÂ  Â return emptyend stacksInUseon put messageÂ  Â window.put_into_messagebox ? put_into_messagebox(message,true) : console.log(message);end putfunction charToNum cÂ  Â return String(c).codePointAt(0);end charToNumfunction numToChar nÂ  Â return String.fromCodePoint(n);end numToChar-- you can get or set propertiesfunction cursorÂ Â  Â return document.body.style.cursor ;end cursoron setCursor pCursorNameÂ  Â if pCursorName is in "alias,all-scroll,auto,cell,context-menu,col-resize,copy,crosshair,default,e-resize,ew-resize,grab,grabbing,help,move,n-resize,ne-resize,nesw-resize,ns-resize,nw-resize,nwse-resize,no-drop,none,not-allowed,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,auto,vertical-text,w-resize,wait,zoom-in,zoom-out,initial" thenÂ  Â result = document.body.style.cursor = pCursorName ;Â  Â elseÂ  Â  Â  exit setCursorÂ  Â end ifend setCursorfunction textArrowsÂ  Â return body.classList.contains('arrow-keys-in-text');end textArrowson setTextArrows valueÂ  Â body.classList.toggle('arrow-keys-in-text', boolean(value));end setTextArrowsfunction itemDelimiterÂ  Â return sim.itemDelimiter || ',';end itemDelimiteron setItemDelimiter newDelimiterÂ  Â sim.itemDelimiter = newDelimiter;end setItemDelimiterfunction mouseLocÂ  Â return sim.mouseLoc || "0,0";end mouseLocfunction mouseHÂ  Â return item 1 of the mouseLocend mouseHfunction mouseVÂ  Â return item 2 of the mouseLocend mouseVfunction clickLocÂ  Â return sim.clickLoc || "0,0";end clickLocfunction clickHÂ  Â return item 1 of the clickLocend clickHfunction clickVÂ  Â return item 2 of the clickLocend clickVfunction clickTextÂ  Â return sim.clickText || '';end clickTextfunction clickLineÂ  Â return sim.clickLine || '';end clickLinefunction mouseÂ  Â return sim.mouse || 'up';end mousefunction mouseClickÂ  Â if (!this.stackOf().mouseClick) return false;Â  Â this.stackOf().mouseClick = false;Â  Â wait until the mouse is upÂ  Â return trueend mouseClickfunction screenRectÂ  Â return String([0,0,stackcontainer.offsetWidth,stackcontainer.offsetHeight]);end screenRectfunction shiftKeyÂ  Â return body.classList.contains('shift') ? 'down' : 'up';end shiftKeyfunction commandKeyÂ  Â return body.classList.contains('command') ? 'down' : 'up';end commandKeyfunction optionKeyÂ  Â return body.classList.contains('option') ? 'down' : 'up';end optionKeyfunction soundÂ  Â return sim.sound || 'done';end soundfunction offset needle, haystackÂ  Â return String(haystack).toLowerCase().indexOf(String(needle).toLowerCase()) + 1;end offseton setPattern whatÂ  Â if what is an integer thenÂ  Â  Â  set_gray_pattern('ui-patterns/PAT128_'+(sim.pattern=(what-1))+'.png');Â  Â  Â  while (!grayPngImg.complete) {Â  Â  Â  Â  Â wait 1 tickÂ  Â  Â  Â  Â console.log('waiting for pattern '+what+' to load from server');Â  Â  Â  Â  }Â  Â  Â if (window.patternz) { window.patternz.style.setProperty('--pattern-x', Math.floor((what-1)/10));Â  Â  Â  Â window.patternz.style.setProperty('--pattern-y', (what-1)%10); }Â  Â end ifend setPatternfunction patternÂ  Â return sim.pattern || 32;end patternon setLineSize valueÂ  Â sim.lineSize = number(value);end setLineSizefunction lineSizeÂ  Â return sim.lineSize || 1;end lineSizeon setBlindTypingend setBlindTypingfunction blindTypingÂ  Â return trueend blindTypingon setBrushend setBrushfunction brushÂ  Â return 8end brushon setNumberFormatend setNumberFormatfunction numberFormatend numberFormaton setLockRecentend setLockRecentfunction lockRecentend lockRecenton setPowerKeysend setPowerKeysfunction powerKeysend powerKeyson setLockScreen valueÂ  Â XTalkQueue.Active.queue[0].options.TemporaryLongSlices = boolean(value);end setLockScreenfunction lockScreenÂ  Â return !!XTalkQueue.Active.queue[0].options.TemporaryLongSlices;end lockScreenon setSoundChannel valueÂ  Â xtalk_sound_channel = number(value);end setSoundChannelfunction soundChannelÂ  Â return xtalk_sound_channel;end soundChannelon setUserModifyend setUserModifyfunction userModifyend userModifyon setUserLevelend setUserLevelfunction userLevelÂ  Â return 5end userLevelon setGridend setGridfunction Gridend Gridon setDragSpeedend setDragSpeedfunction dragSpeedÂ  Â return 0end dragSpeedon setFilled whatÂ  Â sim.stack.classList.toggle('filled', boolean(what));end setFilledfunction filledÂ  Â return sim.stack.classList.contains('filled');end filledon setTextFont whatÂ  Â painttext_proxy.textFont = what;end setTextFontfunction textFontÂ  Â return painttext_proxy.textFont;end textFonton setTextSize whatÂ  Â painttext_proxy.textSize = what;end setTextSizefunction textSizeÂ  Â return painttext_proxy.textSize;end textSizeon setTextHeight whatÂ  Â painttext_proxy.textHeight = what;end setTextHeightfunction textHeightÂ  Â return painttext_proxy.textHeight;end textHeighton setTextAlign whatÂ  Â painttext_proxy.textAlign = what;end setTextAlignfunction textAlignÂ  Â return painttext_proxy.textAlign;end textAlignon setTextStyle whatÂ  Â painttext_proxy.textStyle = what;end setTextStylefunction textStyleÂ  Â return painttext_proxy.textStyle;end textStyleon setLockMessages valueÂ  Â sim.lockMessages = boolean(value);end setLockMessagesfunction lockMessagesÂ  Â return !!sim.lockMessages;end lockMessageson setLockErrorDialogs valueend setLockErrorDialogsfunction lockErrorDialogsÂ  Â return falseend lockErrorDialogson setEditBkgnd valueÂ  Â if (boolean(value) != sim.stack.classList.contains('background-mode')) body.qs('#background-mode').click();end setEditBkgndfunction editBkgndÂ  Â return sim.stack.classList.contains('background-mode');end editBkgndfunction windowsend windowsfunction stacksend stacksfunction menusÂ  Â return Array.from(this.stackOf().parentNode.menubar.qsa('title-bar-menu')).map((tbm)=&gt;tbm.name).join('\n');end menusfunction voicesend voicesfunction suspendedÂ  Â return falseend suspendedfunction diskSpaceÂ  return 2^20end diskSpacefunction heapSpaceÂ  return 2^20end heapSpacefunction versionÂ  get the shortVersion of the stackÂ  if it is a number then return itÂ  return 2.41end versionfunction longVersionÂ  return "0" & (the version * 100) & "8000"end longVersionfunction systemVersionÂ  return 6.08end systemVersionon doMenu whatÂ  Â if what contains "New Stack" thenÂ  Â  Â Â newstack.click();Â  Â else if what contains "New Card" thenÂ  Â Â  Â sim.stack.newCard();Â  Â else if what contains "New Background" thenÂ  Â Â  Â sim.stack.newCard(true);Â  Â else if what contains "New Button" thenÂ  Â Â  Â body.qs('#toolbarvert button-part[name="New Button" i]').click();Â  Â else if what contains "New Field" thenÂ  Â Â  Â body.qs('#toolbarvert button-part[name="New Field" i]').click();Â  Â else if what contains "Stack Info" thenÂ  Â Â  Â launch_info_dialog(sim.stack);Â  Â else if what contains "Import Stack" thenÂ  Â Â  Â importstack.click();Â  Â else if what contains "Message" thenÂ  Â Â  Â if (document.getElementById('messagebox-visible')) document.getElementById('messagebox-visible').click();Â  Â else if what contains "Help" then helpÂ  Â else if what contains "first" then go firstÂ Â Â else if what contains "prev" then go prevÂ  Â else if what contains "next" then go nextÂ  Â else if what contains "last" then go lastÂ  Â else if what contains "home" then go homeÂ Â else if what contains "back" then go backÂ Â elseÂ Â Â  Â log "doMenu" && whatÂ Â Â end ifend doMenuon select selPartÂ  Â if (selPart instanceof HTMLElement) { if (sim.stackOf(selPart)===sim.stack) sim.selectOf('#toolbar button-part', '', selPart.matches('field-part') ? 'Field' : 'Button', body).click(); sim.stackOf(selPart).selectedPart = selPart; return; }Â  Â if (!String(selPart)) { this.stackOf().focus(); return; }Â  Â if word 1 of selPart is "line" and word 2 of selPart is an integer and word 3 of selPart is "of" then do "select" && selPartend selectfunction selectedFieldÂ  return emptyend selectedFieldon answer _parent, promptText, firstButton, secondButton, thirdButton-- answer "Answer?" with yes or NO-- the button choice will be in the variable ItÂ  Â var xtqa = XTalkQueue.Active;Â  Â yield (launch_answer_dialog((result)=&gt;{ _parent.it = answerdialog.button_result; xtqa.resume(); }, promptText, firstButton, secondButton, thirdButton), {timeout: 2**32});end answeron ask _parent, promptText, initialText-- ask "Input something?" with "the default text"-- the user's text will be in the variable ItÂ  Â var xtqa = XTalkQueue.Active;Â  Â yield (launch_ask_dialog((result)=&gt;{ _parent.the_result = askdialog.button_result; _parent.it = askdialog.text_result;Â  Â xtqa.resume(); }, promptText, initialText), {timeout: 2**32});end askon choose itÂ  Â if it is a number then get item it of "browse,button,field,select,lasso,pencil,brush,eraser,line,spray,rectangle,round rect,bucket,oval,curve,text,regular polygon,polygon"Â  Â if last word of it is "tool" then delete last word of itÂ  Â if it is "rect" then get "rectangle"Â  Â if it is "round rectangle" then get "round rect"Â  Â if it is "poly" then get "polygon"Â  Â if it is "spray can" then get "spray"Â  Â if it is "regular poly" or it is "reg poly" or it is "reg polygon" then get "regular polygon"Â  Â var bodytool = body.qs('#toolbar button-part[name="' + _.it.trim() + '" i]');Â  Â if (bodytool) bodytool.click(); else this.stackOf().tool = _.it;end chooseon beep countÂ  Â if count is empty then put 1 into countÂ  Â get emptyÂ  Â repeat with x=1 to countÂ  Â  Â  put " c" after itÂ  Â end repeatÂ  Â play beep tempo 300 itend beepon play first, notesÂ  Â if (first=='stop') kill_audio(); else perform_classic_play_command(first, notes);end playon speak text, voiceÂ  Â window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));end speakfunction speechÂ  return window.speechSynthesis.speaking ? 'speaking' : 'done';end speechon goToStack targetÂ  Â if target is "Home" thenÂ  Â  Â  go homeÂ  Â  Â  exit goToStackÂ  Â end ifÂ  Â target = String(target).replaceAll(':','/').replaceAll(/[^\w\/]/g,'-');Â  Â var levels = 0; while (target[levels]=='/') levels++;Â  Â if (levels) { var md = this.stackOf().parentNode; target = (md.dataset.user?md.dataset.user+'/':'')+((md.dataset.path||'').split('/').slice(0,-levels).join('/'))+target.substr(levels-1); }console.log('going to stack ' + tickedString(target) + ' from stack ' + tickedString(sim.stack.name));Â  Â var userpath = target.split('/');Â  Â if (userpath.length &gt; 1) { download_user_stack(userpath.shift(),userpath.join('/')); }Â  Â else { download_user_stack('',target); }end goToStackon showCards howManyÂ  Â set the lockMessages to trueÂ  Â if howMany is not an integer then put the number of cards into howManyÂ  Â repeat howManyÂ  Â  Â  wait 5 ticksÂ  Â  Â  go next cardÂ  Â end repeatÂ  Â set the lockMessages to falseend showCardson sendToMe bugReportÂ  Â var a = document.createElement('a');Â  Â a.href = "mailto:dan@hypervariety.com?body=" + encodeURI(bugReport);Â  Â a.click();end sendToMeon setMagnifyStacks valueÂ  Â body.classList.toggle('dont-magnify-stacks', !boolean(value));Â  Â if (!boolean(value)) body.classList.remove('fullscreen');Â  Â modalresizer();end setMagnifyStacksfunction magnifyStacksÂ  Â return !body.classList.contains('dont-magnify-stacks') || body.classList.contains('fullscreen');end magnifyStacksfunction rj_list_iconsÂ  Â return Array.from(JSON.parse(this.stackOf().importedICONResources||'[]')).map((i)=&gt;(i.ID + ' ' + i.name)).join('\n');end rj_list_iconsfunction rj_retrieve_icon idÂ  Â var icon = JSON.parse(sim.stack.importedICONResources||'[]').find((i)=&gt;i.ID==id);Â  Â if (!icon) return '';Â  Â return atob(icon.data).split('').map((p)=&gt;[(p=p.charCodeAt(0))&amp;128,p&amp;64,p&amp;32,p&amp;16,p&amp;8,p&amp;4,p&amp;2,p&amp;1]).flat().map((b)=&gt;b?1:0).join('');end rj_retrieve_iconon rj_store_icon id, withName, bitsÂ  Â if the length of bits is not 32^2 then return "Icons are 1024 chars long, 0 for white, 1 for black"Â  Â var icons = JSON.parse(sim.stack.importedICONResources||'[]'), icon = icons.find((i)=&gt;i.ID==id);Â  Â if (!icon) icons.push(icon={ ID:id });Â  Â icon.name = withName;Â  Â icon.data = "";Â  Â for (var b=0; b &lt; bits.length; b += 8) icon.data += String.fromCharCode(((bits[b+0]==0)?0:128)+((bits[b+1]==0)?0:64)+((bits[b+2]==0)?0:32)+((bits[b+3]==0)?0:16)+((bits[b+4]==0)?0:8)+((bits[b+5]==0)?0:4)+((bits[b+6]==0)?0:2)+((bits[b+7]==0)?0:1));Â  Â icon.data = btoa(icon.data);Â  Â this.stackOf().importedICONResources = JSON.stringify(icons);Â  Â delete this.stackOf().importedICONImages;end rj_store_iconfunction rj_large_icon bits, size, gapÂ  Â size = number(size); gap = number(gap);Â  Â var workcanvas = document.createElement('canvas');Â  Â workcanvas.width = workcanvas.height = (size+gap)*32;Â  var ctx = workcanvas.getContext('2d');Â  ctx.fillStyle = 'white';Â  ctx.fillRect(0,0,workcanvas.width,workcanvas.height);Â  ctx.fillStyle = 'black';Â  for (var i = 0; i &lt; bits.length; i++)Â  {Â  if (bits[i]=='1')Â  Â ctx.fillRect((size+gap)*(i%32), (size+gap)*Math.floor(i/32), size, size);Â  }Â  return workcanvas.toDataURL('image/gif');end rj_large_icon</button-part><button-part name=GoForawrd topleft=617,474 width=27 height=31 id=2 showname=false icon=28811 script='on mouseUp
	visual effect wipe left fast
	go next
	end mouseUp
	'> </button-part><button-part id=3 topleft=225,480 width=196 height=19 name=SimScript autohilite=false enabled=false visible=false> </button-part><button-part id=4 topleft=210,475 width=215 height=27 name=SimScript color='#FFFFFF' bevel=2 script='on mouseUp
	put card field "SimScript" into card field "Copy2"
	--put char 1 to 32000 of fld "SimScript" of this card into tVar
	-- put tVar
	end mouseUp
	'> </button-part><field-part part=field id=5 topleft=23,511 width=600 height=231 name=Copy2 type=scrolling dontwrap=true autoselect=true script='-- Messages are sent to buttons, fields, cards, backgrounds, and stacks.
	-- The targets can catch them in script handlers. If they are not caught,
	-- they are sent down the message path to their containing cards and backgrounds, and then the stack.


	-------------------------------- begin OpenXTalk additions -----------------------------------------------------------------

	function userAgent
	-- full userAgent info:
	return window.navigator.userAgent;
	end userAgent

	function userLanguage
	return navigator.language;
	end userLanguage

	function platform
	--- var thePlatform = navigator.platform;
	--- if char 1 to 3 of thePlatform = "Mac" then
	--- return "MacOS"
	--- end if
	--- if thePlatform is "iPhone" or thePlatform is "iPad" or thePlatform is "iPod" Â then
	--- return "iOS"
	--- end if
	--- if char 1 to 3 of thePlatform = "Win" then
	--- return "Windows"
	--- end if
	return navigator.platform;
	end platform

	-- you can get or set properties
	on setBackDrop pColor
	result = document.body.style.background = pColor ;
	end setBackDrop

	function backDrop
	return document.body.style.background;
	end backDrop

	function gamePadAPIAvailable
	return ("gamepad" in navigator)
	end gamePadAPIAvailable

	function webMIDIAvailable
	return ("webmidi" in navigator);
	end webMIDIAvailable

	on launchURL pURL
	put char 1 to 8 of pURL into tTemp
	if tTemp contains "https://" then
	var a = document.createElement(&apos;a&apos;);
	a.href = encodeURI(pURL);
	a.click();
	else
	put "https://" before pURL
	var a = document.createElement(&apos;a&apos;);
	a.href = encodeURI(pURL);
	a.click();
	end if
	end launchURL

	function systemAppearance
	-- check for darkMode:
	if the darkMode is true then
	return "dark"
	else
	return "light"
	end if
	end systemAppearance

	function darkMode
	return window.matchMedia(&apos;(prefers-color-scheme:dark)&apos;).matches;
	end darkMode

	-- basic clipboard write access:
	-- result = navigator.clipboard.writeText("Hello Clipboard!");

	--- get our console-like text area (in the OXT Emscripten Engine wrapper webpage):
	-- result = document.getElementById(&apos;output&apos;).value;

	--------------------------------- end OpenXTalk additions ---------------------------------

	-- when the mouse (or finger) is pressed in the stack:
	on mouseDown
	-- when the click or touch starts on a button, field, or card
	end mouseDown

	on mouseStillDown
	-- while the mouse continues the click
	end mouseStillDown

	on mouseUp
	-- when the mouse or finger releases the clickend mouseUp
	on mouseEnter
	-- when the mouse enters a button, field, or card
	end mouseEnter

	on mouseWithin
	-- while the mouse remains inside
	end mouseWithin

	on mouseLeave
	-- when the mouse leaves the part
	end mouseLeave

	-- these message sent while the stack is navigated: openStack, openBackground, openCard, closeCard, closeBackground, closeStack
	on openStack
	-- when a stack is opened, this message is sent
	end openStack

	on openBackground
	-- when the background changes, this message is sent
	end openBackground

	on openCard
	-- when the card changes, this message is sent
	end openCard

	on closeCard
	-- this message is sent to the closing card before the next one gets openCard
	end closeCard

	on closeBackground
	-- this message is sent to the closing background.
	end closeBackground

	on closeStack
	-- this message is sent to the stack when closing.
	end closeStack

	-- these messages are sent when the selection focus moves.
	on openField
	-- this message is sent to a field when editing begins.
	end openField

	on closeField
	-- this message is sent to a field when editing ends and the contents have changed.
	end closeField

	on exitField
	-- this message is sent to the card when editing ends and the contents have NOT changed.
	end exitField

	-- these messages are sent when the keyboard is used in the stack.
	on keyDown which
	-- sent when a keyboard key is pressed
	put charToNum(which) into ascii
	put word 2 of the target is "field" into targetIsField
	if ascii is 28 and not (targetIsField and the textArrows) then send "arrowKey left" to the target
	else if ascii is 29 and not (targetIsField and the textArrows) then send "arrowKey right" to the target
	else if ascii is 30 and not (targetIsField and the textArrows) then end "arrowKey up" to the target
	else if ascii is 31 and not (targetIsField and the textArrows) then send "arrowKey down" to the target
	else if ascii is 9 then send "tabKey" to the target
	else if (ascii is 10 or ascii is 13) and targetIsField then send "returnInField" to the target
	else if (ascii is 10 or ascii is 13) and not targetIsField then send "returnKey" to the target
	else if the blindTyping then
	if (!document.activeElement || document.activeElement.matches(&apos;div,field-part,card-part&apos;) || !window.messagebox_input || !(/[a-zA-ZÃ-Å¾_0-9]/).test(which)) return;
	\\nput which getSelection().selectAllChildren(window.messagebox_input);
	getSelection().collapseToEnd();
	end if
	end keyDown

	on arrowKey which
	-- arrowKey is sent when you push an arrow key on the keyboard, but not in a field when the textArrows is true
	if which is left then go previous card
	else if which is right then go next card
	else if which is down then go back
	else if which is up then go forth
	else
	throw "Can&apos;t understand arguments of arrowKey.";
	end if
	end arrowKey

	on returnInField
	-- sent when you press return in a field
	end returnInField

	on returnKey
	-- sent when you press return but not in a field.
	end returnKey

	on tabKey
	-- sent when you press tab
	end tabKey

	on idle
	-- this message will be sent repeatedly to the current card
	end idle

	-- and here are some handlers you can use by typing their name in the message box.
	on help
	go home
	sim.stack.card = this.selectOf(&apos;card-part&apos;, &apos;name&apos;, "What was HyperCard?", sim.stack);
	end help

	on sampleMessage
	answer "The simulator script sees the message" with "end sampleMessage"
	end sampleMessage

	on myHandler
	-- and you can write your own. just type it here
	-- or in the script of a part of the stack
	put "I&apos;m writing a handler!" into greeting
	answer greeting
	end myHandler

	on FizzBuzz
	-- a famous homework problem
	get empty
	repeat with n=1 to 100
	if it is not empty then
	put return after it
	if n mod 3 is not 0 and n mod 5 is not zero then
	put n after it
	next repeat
	end if
	if n mod 3 is 0 then put Fizz after it
	if n mod 5 is 0 then put Buzz after it
	end repeat
	put it
	end fizzbuzz

	-- you can also write functions like the square of five or the sqrt(9+9)
	function square y
	return y times y
	end square

	function sqrt n
	return the abs of n ^0.5
	end sqrt

	-- You can mix in lines of JavaScript.
	function random n
	return Math.floor(Math.random()*number(n)) + 1;
	end random

	function round n
	return Math.round(number(n));
	end round

	function abs n
	return Math.abs(number(n));
	end abs

	function trunc n
	return Math.floor(Math.abs(number(n))) * Math.sign(n);
	end trunc

	function length ofStr
	return the number of chars in ofStr
	end length

	function max
	var flattened = Array.from(arguments).map((a)=>(typeof a===&apos;number&apos;)?a:String(a).split(&apos;,&apos;).map(number)).flat();
	return Math.max.apply(null, flattened);
	end max

	function min
	var flattened = Array.from(arguments).map((a)=>(typeof a===&apos;number&apos;)?a:String(a).split(&apos;,&apos;).map(number)).flat();
	return Math.min.apply(null, flattened);
	end min

	function sum
	var flattened = Array.from(arguments).map((a)=>(typeof a===&apos;number&apos;)?a:String(a).split(&apos;,&apos;).map(number)).flat();
	return flattened.reduce((partial,a) => partial+a, 0);
	end sum

	function average
	var flattened = Array.from(arguments).map((a)=>(typeof a===&apos;number&apos;)?a:String(a).split(&apos;,&apos;).map(number)).flat();
	return flattened.reduce((partial,a) => partial+a, 0) / flattened.length;
	end average

	function annuity rate, periods
	return (1 - (1 + rate) ^ -periods) / rate
	end annuity

	function compound rate, periods
	return (1 + rate) ^ periods
	end compound

	function ln value
	return Math.log(value);
	end ln

	function ln1 value
	return Math.log1p(value);
	end ln1

	function log2 value
	return Math.log2(value);
	end log2

	function exp value
	return Math.exp(value);
	end exp

	function exp1 value
	return Math.expm1(value);
	end exp1

	function exp2 value
	return 2 ^ value
	end exp2

	function sin theta
	return Math.sin(number(theta));
	end sin

	function cos theta
	return Math.cos(number(theta));
	end cos

	function tan theta
	return Math.tan(number(theta));
	end tan
	function atan theta
	return Math.atan(number(theta));
	end atan

	function date
	return new Date().toLocaleDateString();
	end date

	function time
	return new Date().toLocaleTimeString();
	end time

	function ticks
	return Math.floor(Date.now() / 1000 * 60);
	end ticks

	function seconds
	return Math.floor(Date.now() / 1000);
	end seconds

	function secs
	return the seconds
	end secs

	function stacksInUse
	return empty
	end stacksInUse

	on put message
	window.put_into_messagebox ? put_into_messagebox(message,true) : console.log(message);
	end put

	function charToNum c

	return String(c).codePointAt(0);
	end charToNum

	function numToChar n
	return String.fromCodePoint(n);
	end numToChar

	-- you can get or set properties
	function cursor
	return document.body.style.cursor ;
	end cursor

	on setCursor pCursorName
	if pCursorName is in "alias,all-scroll,auto,cell,context-menu,col-resize,copy,crosshair,default,e-resize,ew-resize,grab,grabbing,help,move,n-resize,ne-resize,nesw-resize,ns-resize,nw-resize,nwse-resize,no-drop,none,not-allowed,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,auto,vertical-text,w-resize,wait,zoom-in,zoom-out,initial" then
	result = document.body.style.cursor = pCursorName ;
	else
	exit setCursor
	end if
	end setCursor

	function textArrows
	return body.classList.contains(&apos;arrow-keys-in-text&apos;);
	end textArrows

	on setTextArrows value
	body.classList.toggle(&apos;arrow-keys-in-text&apos;, boolean(value));
	end setTextArrows

	function itemDelimiter
	return sim.itemDelimiter || &apos;,&apos;;
	end itemDelimiter

	on setItemDelimiter newDelimiter
	sim.itemDelimiter = newDelimiter;
	end setItemDelimiter

	function mouseLoc
	return sim.mouseLoc || "0,0";
	end mouseLoc

	function mouseH
	return item 1 of the mouseLoc
	end mouseH

	function mouseV
	return item 2 of the mouseLoc
	end mouseV

	function clickLoc
	return sim.clickLoc || "0,0";
	end clickLoc

	function clickH
	return item 1 of the clickLoc
	end clickH

	function clickV
	return item 2 of the clickLoc
	end clickV

	function clickText
	return sim.clickText || &apos;&apos;;
	end clickText

	function clickLine
	return sim.clickLine || &apos;&apos;;
	end clickLine

	function mouse
	return sim.mouse || &apos;up&apos;;
	end mouse

	function mouseClick
	if (!this.stackOf().mouseClick) return false;
	this.stackOf().mouseClick = false;
	wait until the mouse is up
	return true
	end mouseClick

	function screenRect
	return String([0,0,stackcontainer.offsetWidth,stackcontainer.offsetHeight]);
	end screenRect

	function shiftKey
	return body.classList.contains(&apos;shift&apos;) ? &apos;down&apos; : &apos;up&apos;;
	end shiftKey

	function commandKey
	return body.classList.contains(&apos;command&apos;) ? &apos;down&apos; : &apos;up&apos;;
	end commandKey

	function optionKey
	return body.classList.contains(&apos;option&apos;) ? &apos;down&apos; : &apos;up&apos;;
	end optionKey

	function sound
	return sim.sound || &apos;done&apos;;
	end sound

	function offset needle, haystack
	return String(haystack).toLowerCase().indexOf(String(needle).toLowerCase()) + 1;
	end offset

	on setPattern what
	if what is an integer then
	set_gray_pattern(&apos;ui-patterns/PAT128_&apos;+(sim.pattern=(what-1))+&apos;.png&apos;);
	while (!grayPngImg.complete)
	{
	wait 1 tick
	console.log(&apos;waiting for pattern &apos;+what+&apos; to load from server&apos;);
	}
	if (window.patternz) { window.patternz.style.setProperty(&apos;--pattern-x&apos;, Math.floor((what-1)/10));
	window.patternz.style.setProperty(&apos;--pattern-y&apos;, (what-1)%10); }
	end if
	end setPattern

	function pattern
	return sim.pattern || 32;
	end pattern

	on setLineSize value
	sim.lineSize = number(value);
	end setLineSize

	function lineSize
	return sim.lineSize || 1;
	end lineSize

	on setBlindTyping
	end setBlindTyping

	function blindTyping
	return true
	end blindTyping

	on setBrush
	end setBrush

	function brush
	return 8
	end brush

	on setNumberFormat
	end setNumberFormat

	function numberFormat
	end numberFormat

	on setLockRecent
	end setLockRecent

	function lockRecent
	end lockRecent

	on setPowerKeys
	end setPowerKeys

	function powerKeys
	end powerKeys

	on setLockScreen value
	XTalkQueue.Active.queue[0].options.TemporaryLongSlices = boolean(value);
	end setLockScreen

	function lockScreen
	return !!XTalkQueue.Active.queue[0].options.TemporaryLongSlices;
	end lockScreen

	on setSoundChannel value
	xtalk_sound_channel = number(value);
	end setSoundChannel

	function soundChannel
	return xtalk_sound_channel;
	end soundChannel

	on setUserModify
	end setUserModify

	function userModify
	end userModify

	on setUserLevel
	end setUserLevel

	function userLevel
	return 5
	end userLevel

	on setGrid
	end setGrid

	function Grid
	end Grid

	on setDragSpeed
	end setDragSpeed

	function dragSpeed
	return 0
	end dragSpeed

	on setFilled what
	sim.stack.classList.toggle(&apos;filled&apos;, boolean(what));
	end setFilled

	function filled
	return sim.stack.classList.contains(&apos;filled&apos;);
	end filled

	on setTextFont what
	painttext_proxy.textFont = what;
	end setTextFont

	function textFont
	return painttext_proxy.textFont;
	end textFont

	on setTextSize what
	painttext_proxy.textSize = what;
	end setTextSize

	function textSize
	return painttext_proxy.textSize;
	end textSize

	on setTextHeight what
	painttext_proxy.textHeight = what;
	end setTextHeight

	function textHeight
	return painttext_proxy.textHeight;
	end textHeight

	on setTextAlign what
	painttext_proxy.textAlign = what;
	end setTextAlign

	function textAlign
	return painttext_proxy.textAlign;
	end textAlign

	on setTextStyle what
	painttext_proxy.textStyle = what;
	end setTextStyle

	function textStyle
	return painttext_proxy.textStyle;
	end textStyle

	on setLockMessages value
	sim.lockMessages = boolean(value);
	end setLockMessages

	function lockMessages
	return !!sim.lockMessages;
	end lockMessages

	on setLockErrorDialogs value
	end setLockErrorDialogs

	function lockErrorDialogs
	return false
	end lockErrorDialogs

	on setEditBkgnd value
	if (boolean(value) != sim.stack.classList.contains(&apos;background-mode&apos;)) body.qs(&apos;#background-mode&apos;).click();
	end setEditBkgnd

	function editBkgnd
	return sim.stack.classList.contains(&apos;background-mode&apos;);
	end editBkgnd

	function windows
	end windows

	function stacks
	end stacks

	function menus
	return Array.from(this.stackOf().parentNode.menubar.qsa(&apos;title-bar-menu&apos;)).map((tbm)=>tbm.name).join(&apos;\\n&apos;);
	end menus

	function voices
	end voices

	function suspended
	return false
	end suspended

	function diskSpace
	return 2^20
	end diskSpace

	function heapSpace
	return 2^20
	end heapSpace

	function version
	get the shortVersion of the stack
	if it is a number then return it
	return 2.41
	end version

	function longVersion
	return "0" & (the version * 100) & "8000"
	end longVersion

	function systemVersion
	return 6.08
	end systemVersion

	on doMenu what
	if what contains "New Stack" then newstack.click();
	else if what contains "New Card" then sim.stack.newCard();
	else if what contains "New Background" then sim.stack.newCard(true);
	else if what contains "New Button" then body.qs(&apos;#toolbarvert button-part[name="New Button" i]&apos;).click();
	else if what contains "New Field" then body.qs(&apos;#toolbarvert button-part[name="New Field" i]&apos;).click();
	else if what contains "Stack Info" then launch_info_dialog(sim.stack);
	else if what contains "Import Stack" then importstack.click();
	else if what contains "Message" then
	if (document.getElementById(&apos;messagebox-visible&apos;)) document.getElementById(&apos;messagebox-visible&apos;).click();
	else if what contains "Help" then help
	else if what contains "first" then go first
	else if what contains "prev" then go prev
	else if what contains "next" then go next
	else if what contains "last" then go last
	else if what contains "home" then go home
	else if what contains "back" then go back
	else
	put "doMenu" && what
	log "doMenu" && what
	end if
	end doMenu

	on select selPart
	if (selPart instanceof HTMLElement) { if (sim.stackOf(selPart)===sim.stack) sim.selectOf(&apos;#toolbar button-part&apos;, &apos;&apos;, selPart.matches(&apos;field-part&apos;) ? &apos;Field&apos; : &apos;Button&apos;, body).click(); sim.stackOf(selPart).selectedPart = selPart; return; }
	if (!String(selPart)) { this.stackOf().focus(); return; }
	if word 1 of selPart is "line" and word 2 of selPart is an integer and word 3 of selPart is "of" then do "select" && selPart
	end select

	function selectedField
	return empty
	end selectedField

	on answer _parent, promptText, firstButton, secondButton, thirdButton
	-- answer "Answer?" with yes or NO
	-- the button choice will be in the variable It
	var xtqa = XTalkQueue.Active;
	yield (launch_answer_dialog((result)=>{ _parent.it = answerdialog.button_result; xtqa.resume();
	}, promptText, firstButton, secondButton, thirdButton), {timeout: 2**32});
	end answer

	on ask _parent, promptText, initialText
	-- ask "Input something?" with "the default text"
	-- the user&apos;s text will be in the variable It
	var xtqa = XTalkQueue.Active;
	yield (launch_ask_dialog((result)=>{ _parent.the_result = askdialog.button_result; _parent.it = askdialog.text_result;
	xtqa.resume(); }, promptText, initialText), {timeout: 2**32});
	end ask

	on choose it
	if it is a number then get item it of "browse,button,field,select,lasso,pencil,brush,eraser,line,spray,rectangle,round rect,bucket,oval,curve,text,regular polygon,polygon"
	if last word of it is "tool" then delete last word of it
	if it is "rect" then get "rectangle"
	if it is "round rectangle" then get "round rect"
	if it is "poly" then get "polygon"
	if it is "spray can" then get "spray"
	if it is "regular poly" or it is "reg poly" or it is "reg polygon" then get "regular polygon"
	var bodytool = body.qs(&apos;#toolbar button-part[name="&apos; + _.it.trim() + &apos;" i]&apos;);
	if (bodytool) bodytool.click();
	else this.stackOf().tool = _.it;
	end choose

	on beep count
	if count is empty then put 1 into count
	get empty
	repeat with x=1 to count
	put " c" after it
	end repeat
	play beep tempo 300 it
	end beep

	on play first, notes
	if (first==&apos;stop&apos;) kill_audio(); else perform_classic_play_command(first, notes);
	end play

	on speak text, voice
	window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));
	end speak

	function speech
	return window.speechSynthesis.speaking ? &apos;speaking&apos; : &apos;done&apos;;
	end speech

	on goToStack target
	if target is "Home" then
	go home
	exit goToStack
	end if
	target = String(target).replaceAll(&apos;:&apos;,&apos;/&apos;).replaceAll(/[^\\w\\/]/g,&apos;-&apos;);
	var levels = 0; while (target[levels]==&apos;/&apos;) levels++;
	if (levels) { var md = this.stackOf().parentNode; target = (md.dataset.user?md.dataset.user+&apos;/&apos;:&apos;&apos;)+((md.dataset.path||&apos;&apos;).split(&apos;/&apos;).slice(0,-levels).join(&apos;/&apos;))+target.substr(levels-1); }
	console.log(&apos;going to stack &apos; + tickedString(target) + &apos; from stack &apos; + tickedString(sim.stack.name));
	var userpath = target.split(&apos;/&apos;);
	if (userpath.length > 1) { download_user_stack(userpath.shift(),userpath.join(&apos;/&apos;)); }
	else { download_user_stack(&apos;&apos;,target); }
	end goToStack

	on showCards howMany
	set the lockMessages to true
	if howMany is not an integer then put the number of cards into howMany
	repeat howMany
	wait 5 ticks
	go next card
	end repeat
	set the lockMessages to false
	end showCards

	on sendToMe bugReport
	var a = document.createElement(&apos;a&apos;);
	a.href = "mailto:dan@hypervariety.com?body=" + encodeURI(bugReport);
	a.click();
	end sendToMe

	on setMagnifyStacks value
	body.classList.toggle(&apos;dont-magnify-stacks&apos;, !boolean(value));
	if (!boolean(value)) body.classList.remove(&apos;fullscreen&apos;);
	modalresizer();
	end setMagnifyStacks

	function magnifyStacks
	return !body.classList.contains(&apos;dont-magnify-stacks&apos;) || body.classList.contains(&apos;fullscreen&apos;);
	end magnifyStacks

	function rj_list_icons
	return Array.from(JSON.parse(this.stackOf().importedICONResources||&apos;[]&apos;)).map((i)=>(i.ID + &apos; &apos; + i.name)).join(&apos;\\n&apos;);
	end rj_list_icons

	function rj_retrieve_icon id
	var icon = JSON.parse(sim.stack.importedICONResources||&apos;[]&apos;).find((i)=>i.ID==id);
	if (!icon) return &apos;&apos;;
	return atob(icon.data).split(&apos;&apos;).map((p)=>[(p=p.charCodeAt(0))&amp;128,p&amp;64,p&amp;32,p&amp;16,p&amp;8,p&amp;4,p&amp;2,p&amp;1]).flat().map((b)=>b?1:0).join(&apos;&apos;);
	end rj_retrieve_icon

	on rj_store_icon id, withName, bits
	if the length of bits is not 32^2 then return "Icons are 1024 chars long, 0 for white, 1 for black"
	var icons = JSON.parse(sim.stack.importedICONResources||&apos;[]&apos;), icon = icons.find((i)=>i.ID==id);
	if (!icon) icons.push(icon={ ID:id });
	icon.name = withName;
	icon.data = "";
	for (var b=0; b < bits.length; b += 8) icon.data += String.fromCharCode(((bits[b+0]==0)?0:128)+((bits[b+1]==0)?0:64)+((bits[b+2]==0)?0:32)+((bits[b+3]==0)?0:16)+((bits[b+4]==0)?0:8)+((bits[b+5]==0)?0:4)+((bits[b+6]==0)?0:2)+((bits[b+7]==0)?0:1));
	icon.data = btoa(icon.data);
	this.stackOf().importedICONResources = JSON.stringify(icons);
	delete this.stackOf().importedICONImages;
	end rj_store_icon

	function rj_large_icon bits, size, gap
	size = number(size);
	gap = number(gap);
	var workcanvas = document.createElement(&apos;canvas&apos;);
	workcanvas.width = workcanvas.height = (size+gap)*32;
	var ctx = workcanvas.getContext(&apos;2d&apos;);
	ctx.fillStyle = &apos;white&apos;;
	ctx.fillRect(0,0,workcanvas.width,workcanvas.height);
	ctx.fillStyle = &apos;black&apos;;
	for (var i = 0; i < bits.length; i++)
	{
	if (bits[i]==&apos;1&apos;) ctx.fillRect((size+gap)*(i%32), (size+gap)*Math.floor(i/32), size, size);
	}
	return workcanvas.toDataURL(&apos;image/gif&apos;);
	end rj_large_icon

	' textfont=Monaco textsize=9 textstyle='' textalign=left fixedlineheight=true locktext=true scroll=940><div class=selected><div>-- Messages are sent to buttons, fields, cards, backgrounds, and stacks. The targets can catch them in script handlers. If they are not caught, they are sent down the message path to their containing cards and backgrounds, and then the stack.-------------------------------- begin OpenXTalk additions -----------------------------------------------------------------</div><div><br></div><div>function userAgent</div><div>Â  Â -- full userAgent info:</div><div>Â  Â return window.navigator.userAgent;</div><div>end userAgent</div><div><br></div><div>function userLanguage</div><div>Â  Â return navigator.language;</div><div>end userLanguage</div><div><br></div><div>function platform</div><div>Â  Â --- var thePlatform = navigator.platform;</div><div>Â  Â --- if char 1 to 3 of thePlatform = "Mac" then</div><div>Â  Â --- return "MacOS"</div><div>Â  Â --- end if</div><div>Â  Â --- if thePlatform is "iPhone" or thePlatform is "iPad" or thePlatform is "iPod" Â then</div><div>Â  Â --- return "iOS"</div><div>Â  Â --- end if</div><div>Â  Â --- if char 1 to 3 of thePlatform = "Win" then</div><div>Â  Â  Â --- return "Windows"</div><div>Â  Â --- end if</div><div>Â  Â  return navigator.platform;</div><div>end platform</div><div><br></div><div>-- you can get or set properties</div><div>on setBackDrop pColor</div><div>Â  Â result = document.body.style.background = pColor ;</div><div>end setBackDrop</div><div><br></div><div>function backDrop</div><div>Â  Â return document.body.style.background;</div><div>end backDrop</div><div><br></div><div>function gamePadAPIAvailable</div><div>Â  Â return ("gamepad" in navigator)</div><div>end gamePadAPIAvailable</div><div><br></div><div>function webMIDIAvailable</div><div>Â  Â return ("webmidi" in navigator);</div><div>end webMIDIAvailable</div><div><br></div><div>on launchURL pURL</div><div>Â  Â put char 1 to 8 of pURL into tTemp</div><div>Â  Â if tTemp contains "https://" then</div><div>Â  Â  Â  var a = document.createElement('a');</div><div>Â  Â  Â  Â \na.href = encodeURI(pURL); \na.click();</div><div>Â  Â else</div><div>Â  Â  Â  put "https://" before pURL</div><div>Â  Â  Â  var a = document.createElement('a');</div><div>Â  Â  Â \na.href = encodeURI(pURL); \na.click();</div><div>Â  Â end if</div><div>end launchURL</div><div><br></div><div>function systemAppearance</div><div>Â  Â -- check for darkMode:</div><div>Â  Â if the darkMode is true then</div><div>Â  Â  Â  return "dark"</div><div>Â  Â else</div><div>Â  Â  Â  return "light"</div><div>Â  Â end if</div><div>end systemAppearance</div><div><br></div><div><br></div><div>function darkMode</div><div>Â  Â return window.matchMedia('(prefers-color-scheme:dark)').matches;</div><div>end darkMode</div><div><br></div><div>-- basic clipboard write access:</div><div>-- result = navigator.clipboard.writeText("Hello Clipboard!");</div><div><br></div><div>--- get our console-like text area (in the OXT Emscripten Engine wrapper webpage):</div><div>-- result = document.getElementById('output').value;</div><div><br></div><div>--------------------------------- end OpenXTalk additions ---------------------------------</div><div><br></div><div>-- when the mouse (or finger) is pressed in the stack:</div><div>on mouseDown</div><div>Â  Â -- when the click or touch starts on a button, field, or card</div><div>end mouseDown</div><div><br></div><div>on mouseStillDown</div><div>Â  Â -- while the mouse continues the click</div><div>end mouseStillDown</div><div><br></div><div>on mouseUp</div><div>Â  Â -- when the mouse or finger releases the clickend mouseUp</div><div>on mouseEnter</div><div>Â  Â  Â -- when the mouse enters a button, field, or card</div><div>end mouseEnter</div><div><br></div><div>on mouseWithin</div><div>Â  Â -- while the mouse remains inside</div><div>end mouseWithin</div><div><br></div><div>on mouseLeave</div><div>Â  Â -- when the mouse leaves the part</div><div>end mouseLeave</div><div><br></div><div>-- these message sent while the stack is navigated: openStack, openBackground, openCard, closeCard, closeBackground, closeStack</div><div>on openStack</div><div>Â  Â -- when a stack is opened, this message is sent</div><div>end openStack</div><div><br></div><div>on openBackground</div><div>Â  Â -- when the background changes, this message is sent</div><div>end openBackground</div><div><br></div><div>on openCard</div><div>Â  Â -- when the card changes, this message is sent</div><div>end openCard</div><div><br></div><div>on closeCard</div><div>Â  Â -- this message is sent to the closing card before the next one gets openCard</div><div>end closeCard</div><div><br></div><div>on closeBackground</div><div>Â  Â -- this message is sent to the closing background.</div><div>end closeBackground</div><div><br></div><div>on closeStack</div><div>Â  Â -- this message is sent to the stack when closing.</div><div>end closeStack</div><div><br></div><div>-- these messages are sent when the selection focus moves.</div><div>on openField</div><div>Â  Â -- this message is sent to a field when editing begins.</div><div>end openField</div><div><br></div><div>on closeField</div><div>Â  Â -- this message is sent to a field when editing ends and the contents have changed.</div><div>end closeField</div><div><br></div><div>on exitField</div><div>Â  Â -- this message is sent to the card when editing ends and the contents have NOT changed.</div><div>end exitField</div><div><br></div><div>-- these messages are sent when the keyboard is used in the stack.</div><div>on keyDown which</div><div>Â  Â -- sent when a keyboard key is pressed</div><div>Â  Â put charToNum(which) into ascii</div><div>Â  Â put word 2 of the target is "field" into targetIsField</div><div>Â  Â if ascii is 28 and not (targetIsField and the textArrows) then send "arrowKey left" to the target</div><div>Â  Â else if ascii is 29 and not (targetIsField and the textArrows) then send "arrowKey right" to the target</div><div>Â  Â else if ascii is 30 and not (targetIsField and the textArrows) then end "arrowKey up" to the target</div><div>Â  Â else if ascii is 31 and not (targetIsField and the textArrows) then send "arrowKey down" to the target</div><div>Â  Â else if ascii is 9 then send "tabKey" to the target</div><div>Â  Â else if (ascii is 10 or ascii is 13) and targetIsField then send "returnInField" to the target</div><div>Â  Â else if (ascii is 10 or ascii is 13) and not targetIsField then send "returnKey" to the target</div><div>Â  Â else if the blindTyping then</div><div>Â  Â  Â  if (!document.activeElement || document.activeElement.matches('div,field-part,card-part') || !window.messagebox_input || !(/[a-zA-ZÃ-Å¾_0-9]/).test(which)) return;</div><div>Â  Â  Â  Â  Â  \nput which getSelection().selectAllChildren(window.messagebox_input);</div><div>Â  Â  Â  Â  Â  getSelection().collapseToEnd();</div><div>Â  Â end if</div><div>end keyDown</div><div><br></div><div>on arrowKey which</div><div>Â  Â -- arrowKey is sent when you push an arrow key on the keyboard, but not in a field when the textArrows is true</div><div>Â  Â if which is left then go previous card</div><div>Â  Â else if which is right then go next card</div><div>Â  Â else if which is down then go back</div><div>Â  Â else if which is up then go forth</div><div>Â  Â else</div><div>Â  Â  Â  throw "Can't understand arguments of arrowKey.";</div><div>Â  Â end if</div><div>end arrowKey</div><div><br></div><div>on returnInField</div><div>Â  Â -- sent when you press return in a field</div><div>end returnInField</div><div><br></div><div>on returnKey</div><div>Â  Â -- sent when you press return but not in a field.</div><div>end returnKey</div><div><br></div><div>on tabKey</div><div>Â  Â -- sent when you press tab</div><div>end tabKey</div><div><br></div><div>on idle</div><div>Â  Â -- this message will be sent repeatedly to the current card</div><div>end idle</div><div><br></div><div>-- and here are some handlers you can use by typing their name in the message box.</div><div>on help</div><div>Â  Â go home</div><div>Â  Â sim.stack.card = this.selectOf('card-part', 'name', "What was HyperCard?", sim.stack);</div><div>end help</div><div><br></div><div>on sampleMessage</div><div>Â  Â answer "The simulator script sees the message" with "end sampleMessage"</div><div>end sampleMessage</div><div><br></div><div>on myHandler</div><div>Â  Â -- and you can write your own. just type it here</div><div>Â  Â -- or in the script of a part of the stack</div><div>Â  Â put "I'm writing a handler!" into greeting</div><div>Â  Â answer greeting</div><div>end myHandler</div><div><br></div><div>on FizzBuzz</div><div>Â  Â -- a famous homework problem</div><div>Â  Â get empty</div><div>Â  Â repeat with n=1 to 100</div><div>Â  Â  Â  if it is not empty then</div><div>Â  Â  Â  Â put return after it</div><div>Â  Â  Â  if n mod 3 is not 0 and n mod 5 is not zero then</div><div>Â  Â  Â put n after it</div><div>Â  Â  Â next repeat</div><div>Â  Â end if</div><div>Â  Â  Â if n mod 3 is 0 then put Fizz after it</div><div>Â  Â  Â if n mod 5 is 0 then put Buzz after it</div><div>Â  Â end repeat</div><div>Â  Â put it</div><div>end fizzbuzz</div><div><br></div><div>-- you can also write functions like the square of five or the sqrt(9+9)</div><div>function square y</div><div>Â  Â return y times y</div><div>end square</div><div><br></div><div>function sqrt n</div><div>Â  Â return the abs of n ^0.5</div><div>end sqrt</div><div><br></div><div>-- You can mix in lines of JavaScript.</div><div>function random n</div><div>Â  Â return Math.floor(Math.random()*number(n)) + 1;</div><div>end random</div><div><br></div><div>function round n</div><div>Â  Â return Math.round(number(n));</div><div>end round</div><div><br></div><div>function abs n</div><div>Â  Â return Math.abs(number(n));</div><div>end abs</div><div><br></div><div>function trunc n</div><div>Â  Â return Math.floor(Math.abs(number(n))) * Math.sign(n);</div><div>end trunc</div><div><br></div><div>function length ofStr</div><div>Â  Â return the number of chars in ofStr</div><div>end length</div><div><br></div><div>function max</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return Math.max.apply(null, flattened);</div><div>end max</div><div><br></div><div>function min</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return Math.min.apply(null, flattened);</div><div>end min</div><div><br></div><div>function sum</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return flattened.reduce((partial,a) =&gt; partial+a, 0);</div><div>end sum</div><div><br></div><div>function average</div><div>Â  Â var flattened = Array.from(arguments).map((a)=&gt;(typeof a==='number')?a:String(a).split(',').map(number)).flat();</div><div>Â  Â return flattened.reduce((partial,a) =&gt; partial+a, 0) / flattened.length;</div><div>end average</div><div><br></div><div>function annuity rate, periods</div><div>Â  Â return (1 - (1 + rate) ^ -periods) / rate</div><div>end annuity</div><div><br></div><div>function compound rate, periods</div><div>Â  Â return (1 + rate) ^ periods</div><div>end compound</div><div><br></div><div>function ln value</div><div>Â  Â return Math.log(value);</div><div>end ln</div><div><br></div><div>function ln1 value</div><div>Â  Â return Math.log1p(value);</div><div>end ln1</div><div><br></div><div>function log2 value</div><div>Â  Â return Math.log2(value);</div><div>end log2</div><div><br></div><div>function exp value</div><div>Â  Â return Math.exp(value);</div><div>end exp</div><div><br></div><div>function exp1 value</div><div>Â  Â return Math.expm1(value);</div><div>end exp1</div><div><br></div><div>function exp2 value</div><div>Â  Â return 2 ^ value</div><div>end exp2</div><div><br></div><div>function sin theta</div><div>Â  Â return Math.sin(number(theta));</div><div>end sin</div><div><br></div><div>function cos theta</div><div>Â  Â return Math.cos(number(theta));</div><div>end cos</div><div><br></div><div>function tan theta</div><div>Â  Â return Math.tan(number(theta));</div><div>end tan</div><div>function atan theta</div><div>Â  Â return Math.atan(number(theta));</div><div>end atan</div><div><br></div><div>function date</div><div>Â  Â return new Date().toLocaleDateString();</div><div>end date</div><div><br></div><div>function time</div><div>Â  Â return new Date().toLocaleTimeString();</div><div>end time</div><div><br></div><div>function ticks</div><div>Â  Â return Math.floor(Date.now() / 1000 * 60);</div><div>end ticks</div><div><br></div><div>function seconds</div><div>Â  Â return Math.floor(Date.now() / 1000);</div><div>end seconds</div><div><br></div><div>function secs</div><div>Â  Â return the seconds</div><div>end secs</div><div><br></div><div>function stacksInUse</div><div>Â  Â return empty</div><div>end stacksInUse</div><div><br></div><div>on put message</div><div>Â  Â window.put_into_messagebox ? put_into_messagebox(message,true) : console.log(message);</div><div>end put</div><div><br></div><div>function charToNum c</div><div><br></div><div>Â  Â return String(c).codePointAt(0);</div><div>end charToNum</div><div><br></div><div>function numToChar n</div><div>Â  Â return String.fromCodePoint(n);</div><div>end numToChar</div><div><br></div><div>-- you can get or set properties</div><div>function cursorÂ </div><div>Â  Â return document.body.style.cursor ;</div><div>end cursor</div><div><br></div><div>on setCursor pCursorName</div><div>Â  Â if pCursorName is in "alias,all-scroll,auto,cell,context-menu,col-resize,copy,crosshair,default,e-resize,ew-resize,grab,grabbing,help,move,n-resize,ne-resize,nesw-resize,ns-resize,nw-resize,nwse-resize,no-drop,none,not-allowed,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,auto,vertical-text,w-resize,wait,zoom-in,zoom-out,initial" then</div><div>Â  Â  Â  result = document.body.style.cursor = pCursorName ;</div><div>Â  Â else</div><div>Â  Â  Â  exit setCursor</div><div>Â  Â end if</div><div>end setCursor</div><div><br></div><div>function textArrows</div><div>Â  Â return body.classList.contains('arrow-keys-in-text');</div><div>end textArrows</div><div><br></div><div>on setTextArrows value</div><div>Â  Â body.classList.toggle('arrow-keys-in-text', boolean(value));</div><div>end setTextArrows</div><div><br></div><div>function itemDelimiter</div><div>Â  Â return sim.itemDelimiter || ',';</div><div>end itemDelimiter</div><div><br></div><div>on setItemDelimiter newDelimiter</div><div>Â  Â sim.itemDelimiter = newDelimiter;</div><div>end setItemDelimiter</div><div><br></div><div>function mouseLoc</div><div>Â  Â return sim.mouseLoc || "0,0";</div><div>end mouseLoc</div><div><br></div><div>function mouseH</div><div>Â  Â return item 1 of the mouseLoc</div><div>end mouseH</div><div><br></div><div>function mouseV</div><div>Â  Â return item 2 of the mouseLoc</div><div>end mouseV</div><div><br></div><div>function clickLoc</div><div>Â  Â return sim.clickLoc || "0,0";</div><div>end clickLoc</div><div><br></div><div>function clickH</div><div>Â  Â return item 1 of the clickLoc</div><div>end clickH</div><div><br></div><div>function clickV</div><div>Â  Â return item 2 of the clickLoc</div><div>end clickV</div><div><br></div><div>function clickText</div><div>Â  Â return sim.clickText || '';</div><div>end clickText</div><div><br></div><div>function clickLine</div><div>Â  Â return sim.clickLine || '';</div><div>end clickLine</div><div><br></div><div>function mouse</div><div>Â  Â return sim.mouse || 'up';</div><div>end mouse</div><div><br></div><div>function mouseClick</div><div>Â  Â if (!this.stackOf().mouseClick) return false;</div><div>Â  Â this.stackOf().mouseClick = false;</div><div>Â  Â wait until the mouse is up</div><div>Â  Â return true</div><div>end mouseClick</div><div><br></div><div>function screenRect</div><div>Â  Â return String([0,0,stackcontainer.offsetWidth,stackcontainer.offsetHeight]);</div><div>end screenRect</div><div><br></div><div>function shiftKey</div><div>Â  Â return body.classList.contains('shift') ? 'down' : 'up';</div><div>end shiftKey</div><div><br></div><div>function commandKey</div><div>Â  Â return body.classList.contains('command') ? 'down' : 'up';</div><div>end commandKey</div><div><br></div><div>function optionKey</div><div>Â  Â return body.classList.contains('option') ? 'down' : 'up';</div><div>end optionKey</div><div><br></div><div>function sound</div><div>Â  Â return sim.sound || 'done';</div><div>end sound</div><div><br></div><div>function offset needle, haystack</div><div>Â  Â return String(haystack).toLowerCase().indexOf(String(needle).toLowerCase()) + 1;</div><div>end offset</div><div><br></div><div>on setPattern what</div><div>Â  Â if what is an integer then</div><div>Â  Â  Â  set_gray_pattern('ui-patterns/PAT128_'+(sim.pattern=(what-1))+'.png');</div><div>Â  Â  Â  while (!grayPngImg.complete)</div><div>Â  Â  {</div><div>Â  Â  Â wait 1 tick</div><div>Â  Â  Â console.log('waiting for pattern '+what+' to load from server');</div><div>Â  Â  }</div><div>Â  Â  Â if (window.patternz) { window.patternz.style.setProperty('--pattern-x', Math.floor((what-1)/10));</div><div>Â  Â  Â  window.patternz.style.setProperty('--pattern-y', (what-1)%10); }</div><div>Â  Â end if</div><div>end setPattern</div><div><br></div><div>function pattern</div><div>Â  Â return sim.pattern || 32;</div><div>end pattern</div><div><br></div><div>on setLineSize value</div><div>Â  Â sim.lineSize = number(value);</div><div>end setLineSize</div><div><br></div><div>function lineSize</div><div>Â  Â return sim.lineSize || 1;</div><div>end lineSize</div><div><br></div><div>on setBlindTyping</div><div>end setBlindTyping</div><div><br></div><div>function blindTyping</div><div>Â  Â return true</div><div>end blindTyping</div><div><br></div><div>on setBrush</div><div>end setBrush</div><div><br></div><div>function brush</div><div>Â  Â return 8</div><div>end brush</div><div><br></div><div>on setNumberFormat</div><div>end setNumberFormat</div><div><br></div><div>function numberFormat</div><div>end numberFormat</div><div><br></div><div>on setLockRecent</div><div>end setLockRecent</div><div><br></div><div>function lockRecent</div><div>end lockRecent</div><div><br></div><div>on setPowerKeys</div><div>end setPowerKeys</div><div><br></div><div>function powerKeys</div><div>end powerKeys</div><div><br></div><div>on setLockScreen value</div><div>Â  Â XTalkQueue.Active.queue[0].options.TemporaryLongSlices = boolean(value);</div><div>end setLockScreen</div><div><br></div><div>function lockScreen</div><div>Â  Â return !!XTalkQueue.Active.queue[0].options.TemporaryLongSlices;</div><div>end lockScreen</div><div><br></div><div>on setSoundChannel value</div><div>Â  Â xtalk_sound_channel = number(value);</div><div>end setSoundChannel</div><div><br></div><div>function soundChannel</div><div>Â  Â return xtalk_sound_channel;</div><div>end soundChannel</div><div><br></div><div>on setUserModify</div><div>end setUserModify</div><div><br></div><div>function userModify</div><div>end userModify</div><div><br></div><div>on setUserLevel</div><div>end setUserLevel</div><div><br></div><div>function userLevel</div><div>Â  Â return 5</div><div>end userLevel</div><div><br></div><div>on setGrid</div><div>end setGrid</div><div><br></div><div>function Grid</div><div>end Grid</div><div><br></div><div>on setDragSpeed</div><div>end setDragSpeed</div><div><br></div><div>function dragSpeed</div><div>Â  Â return 0</div><div>end dragSpeed</div><div><br></div><div>on setFilled what</div><div>Â  Â sim.stack.classList.toggle('filled', boolean(what));</div><div>end setFilled</div><div><br></div><div>function filled</div><div>Â  Â return sim.stack.classList.contains('filled');</div><div>end filled</div><div><br></div><div>on setTextFont what</div><div>Â  Â painttext_proxy.textFont = what;</div><div>end setTextFont</div><div><br></div><div>function textFont</div><div>Â  Â return painttext_proxy.textFont;</div><div>end textFont</div><div><br></div><div>on setTextSize what</div><div>Â  Â painttext_proxy.textSize = what;</div><div>end setTextSize</div><div><br></div><div>function textSize</div><div>Â  Â return painttext_proxy.textSize;</div><div>end textSize</div><div><br></div><div>on setTextHeight what</div><div>Â  Â painttext_proxy.textHeight = what;</div><div>end setTextHeight</div><div><br></div><div>function textHeight</div><div>Â  Â return painttext_proxy.textHeight;</div><div>end textHeight</div><div><br></div><div>on setTextAlign what</div><div>Â  Â painttext_proxy.textAlign = what;</div><div>end setTextAlign</div><div><br></div><div>function textAlign</div><div>Â  Â return painttext_proxy.textAlign;</div><div>end textAlign</div><div><br></div><div>on setTextStyle what</div><div>Â  Â painttext_proxy.textStyle = what;</div><div>end setTextStyle</div><div><br></div><div>function textStyle</div><div>Â  Â return painttext_proxy.textStyle;</div><div>end textStyle</div><div><br></div><div>on setLockMessages value</div><div>Â  Â sim.lockMessages = boolean(value);</div><div>end setLockMessages</div><div><br></div><div>function lockMessages</div><div>Â  Â return !!sim.lockMessages;</div><div>end lockMessages</div><div><br></div><div>on setLockErrorDialogs value</div><div>end setLockErrorDialogs</div><div><br></div><div>function lockErrorDialogs</div><div>Â  Â return false</div><div>end lockErrorDialogs</div><div><br></div><div>on setEditBkgnd value</div><div>Â  Â if (boolean(value) != sim.stack.classList.contains('background-mode')) body.qs('#background-mode').click();</div><div>end setEditBkgnd</div><div><br></div><div>function editBkgnd</div><div>Â  Â return sim.stack.classList.contains('background-mode');</div><div>end editBkgnd</div><div><br></div><div>function windows</div><div>end windows</div><div><br></div><div>function stacks</div><div>end stacks</div><div><br></div><div>function menus</div><div>Â  Â return Array.from(this.stackOf().parentNode.menubar.qsa('title-bar-menu')).map((tbm)=&gt;tbm.name).join('\n');</div><div>end menus</div><div><br></div><div>function voices</div><div>end voices</div><div><br></div><div>function suspended</div><div>Â  Â return false</div><div>end suspended</div><div><br></div><div>function diskSpace</div><div>Â  Â  Â return 2^20</div><div>end diskSpace</div><div><br></div><div>function heapSpace</div><div>Â  Â  Â return 2^20</div><div>end heapSpace</div><div><br></div><div>function version</div><div>Â  Â  Â get the shortVersion of the stack</div><div>Â  Â  Â if it is a number then return it</div><div>Â  Â  Â return 2.41</div><div>end version</div><div><br></div><div>function longVersion</div><div>Â  Â  Â return "0" & (the version * 100) & "8000"</div><div>end longVersion</div><div><br></div><div>function systemVersion</div><div>Â  Â  Â return 6.08</div><div>end systemVersion</div><div><br></div><div>on doMenu what</div><div>Â  Â if what contains "New Stack" then newstack.click();</div><div>Â  Â else if what contains "New Card" then sim.stack.newCard();</div><div>Â  Â else if what contains "New Background" then sim.stack.newCard(true);</div><div>Â  Â else if what contains "New Button" then body.qs('#toolbarvert button-part[name="New Button" i]').click();</div><div>Â  Â else if what contains "New Field" then body.qs('#toolbarvert button-part[name="New Field" i]').click();</div><div>Â  Â else if what contains "Stack Info" then launch_info_dialog(sim.stack);</div><div>Â  Â else if what contains "Import Stack" then importstack.click();</div><div>Â  Â else if what contains "Message" then</div><div>Â  Â  Â  if (document.getElementById('messagebox-visible')) document.getElementById('messagebox-visible').click();</div><div>Â  Â else if what contains "Help" then help</div><div>Â  Â else if what contains "first" then go first</div><div>Â  Â else if what contains "prev" then go prev</div><div>Â  Â else if what contains "next" then go next</div><div>Â  Â else if what contains "last" then go last</div><div>Â  Â else if what contains "home" then go home</div><div>Â  Â else if what contains "back" then go back</div><div>Â  Â else</div><div>Â  Â  Â  put "doMenu" && what</div><div>Â  Â  Â  log "doMenu" && what</div><div>Â  Â end if</div><div>end doMenu</div><div><br></div><div>on select selPart</div><div>Â  Â if (selPart instanceof HTMLElement) { if (sim.stackOf(selPart)===sim.stack) sim.selectOf('#toolbar button-part', '', selPart.matches('field-part') ? 'Field' : 'Button', body).click(); sim.stackOf(selPart).selectedPart = selPart; return; }</div><div>Â  Â if (!String(selPart)) { this.stackOf().focus(); return; }</div><div>Â  Â if word 1 of selPart is "line" and word 2 of selPart is an integer and word 3 of selPart is "of" then do "select" && selPart</div><div>end select</div><div><br></div><div>function selectedField</div><div>Â  Â  Â return empty</div><div>end selectedField</div><div><br></div><div>on answer _parent, promptText, firstButton, secondButton, thirdButton</div><div>Â  Â  -- answer "Answer?" with yes or NO</div><div>Â  Â  -- the button choice will be in the variable It</div><div>Â  Â var xtqa = XTalkQueue.Active;</div><div>Â  Â yield (launch_answer_dialog((result)=&gt;{ _parent.it = answerdialog.button_result; xtqa.resume();</div><div>Â  Â  }, promptText, firstButton, secondButton, thirdButton), {timeout: 2**32});</div><div>end answer</div><div><br></div><div>on ask _parent, promptText, initialText</div><div>Â  Â -- ask "Input something?" with "the default text"</div><div>Â  Â -- the user's text will be in the variable It</div><div>Â  Â var xtqa = XTalkQueue.Active;</div><div>Â  Â yield (launch_ask_dialog((result)=&gt;{ _parent.the_result = askdialog.button_result; _parent.it = askdialog.text_result;</div><div>Â  Â xtqa.resume(); }, promptText, initialText), {timeout: 2**32});</div><div>end ask</div><div><br></div><div>on choose it</div><div>Â  Â if it is a number then get item it of "browse,button,field,select,lasso,pencil,brush,eraser,line,spray,rectangle,round rect,bucket,oval,curve,text,regular polygon,polygon"</div><div>Â  Â if last word of it is "tool" then delete last word of it</div><div>Â  Â if it is "rect" then get "rectangle"</div><div>Â  Â if it is "round rectangle" then get "round rect"</div><div>Â  Â if it is "poly" then get "polygon"</div><div>Â  Â if it is "spray can" then get "spray"</div><div>Â  Â if it is "regular poly" or it is "reg poly" or it is "reg polygon" then get "regular polygon"</div><div>Â  Â var bodytool = body.qs('#toolbar button-part[name="' + _.it.trim() + '" i]');</div><div>Â  Â if (bodytool) bodytool.click();</div><div>Â  Â else this.stackOf().tool = _.it;</div><div>end choose</div><div><br></div><div>on beep count</div><div>Â  Â if count is empty then put 1 into count</div><div>Â  Â get empty</div><div>Â  Â repeat with x=1 to count</div><div>Â  Â  Â  put " c" after it</div><div>Â  Â end repeat</div><div>Â  Â play beep tempo 300 it</div><div>end beep</div><div><br></div><div>on play first, notes</div><div>Â  Â if (first=='stop') kill_audio(); else perform_classic_play_command(first, notes);</div><div>end play</div><div><br></div><div>on speak text, voice</div><div>Â  Â window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));</div><div>end speak</div><div><br></div><div>function speech</div><div>Â  Â  Â return window.speechSynthesis.speaking ? 'speaking' : 'done';</div><div>end speech</div><div><br></div><div>on goToStack target</div><div>Â  Â if target is "Home" then</div><div>Â  Â  Â  go home</div><div>Â  Â  Â  exit goToStack</div><div>Â  Â end if</div><div>Â  Â target = String(target).replaceAll(':','/').replaceAll(/[^\w\/]/g,'-');</div><div>Â  Â var levels = 0; while (target[levels]=='/') levels++;</div><div>Â  Â if (levels) { var md = this.stackOf().parentNode; target = (md.dataset.user?md.dataset.user+'/':'')+((md.dataset.path||'').split('/').slice(0,-levels).join('/'))+target.substr(levels-1); }</div><div>Â  Â  console.log('going to stack ' + tickedString(target) + ' from stack ' + tickedString(sim.stack.name));</div><div>Â  Â var userpath = target.split('/');</div><div>Â  Â if (userpath.length &gt; 1) { download_user_stack(userpath.shift(),userpath.join('/')); }</div><div>Â  Â else { download_user_stack('',target); }</div><div>end goToStack</div><div><br></div><div>on showCards howMany</div><div>Â  Â set the lockMessages to true</div><div>Â  Â if howMany is not an integer then put the number of cards into howMany</div><div>Â  Â repeat howMany</div><div>Â  Â  Â  wait 5 ticks</div><div>Â  Â  Â  go next card</div><div>Â  Â end repeat</div><div>Â  Â set the lockMessages to false</div><div>end showCards</div><div><br></div><div>on sendToMe bugReport</div><div>Â  Â var a = document.createElement('a');</div><div>Â  Â a.href = "mailto:dan@hypervariety.com?body=" + encodeURI(bugReport);</div><div>Â  Â a.click();</div><div>end sendToMe</div><div><br></div><div>on setMagnifyStacks value</div><div>Â  Â body.classList.toggle('dont-magnify-stacks', !boolean(value));</div><div>Â  Â if (!boolean(value)) body.classList.remove('fullscreen');</div><div>Â  Â modalresizer();</div><div>end setMagnifyStacks</div><div><br></div><div>function magnifyStacks</div><div>Â  Â return !body.classList.contains('dont-magnify-stacks') || body.classList.contains('fullscreen');</div><div>end magnifyStacks</div><div><br></div><div>function rj_list_icons</div><div>Â  Â return Array.from(JSON.parse(this.stackOf().importedICONResources||'[]')).map((i)=&gt;(i.ID + ' ' + i.name)).join('\n');</div><div>end rj_list_icons</div><div><br></div><div>function rj_retrieve_icon id</div><div>Â  Â var icon = JSON.parse(sim.stack.importedICONResources||'[]').find((i)=&gt;i.ID==id);</div><div>Â  Â if (!icon) return '';</div><div>Â  Â return atob(icon.data).split('').map((p)=&gt;[(p=p.charCodeAt(0))&amp;128,p&amp;64,p&amp;32,p&amp;16,p&amp;8,p&amp;4,p&amp;2,p&amp;1]).flat().map((b)=&gt;b?1:0).join('');</div><div>end rj_retrieve_icon</div><div><br></div><div>on rj_store_icon id, withName, bits</div><div>Â  Â if the length of bits is not 32^2 then return "Icons are 1024 chars long, 0 for white, 1 for black"</div><div>Â  Â var icons = JSON.parse(sim.stack.importedICONResources||'[]'), icon = icons.find((i)=&gt;i.ID==id);</div><div>Â  Â if (!icon) icons.push(icon={ ID:id });</div><div>Â  Â icon.name = withName;</div><div>Â  Â icon.data = "";</div><div>Â  Â for (var b=0; b &lt; bits.length; b += 8) icon.data += String.fromCharCode(((bits[b+0]==0)?0:128)+((bits[b+1]==0)?0:64)+((bits[b+2]==0)?0:32)+((bits[b+3]==0)?0:16)+((bits[b+4]==0)?0:8)+((bits[b+5]==0)?0:4)+((bits[b+6]==0)?0:2)+((bits[b+7]==0)?0:1));</div><div>Â  Â icon.data = btoa(icon.data);</div><div>Â  Â this.stackOf().importedICONResources = JSON.stringify(icons);</div><div>Â  Â delete this.stackOf().importedICONImages;</div><div>end rj_store_icon</div><div><br></div><div>function rj_large_icon bits, size, gap</div><div>Â  Â size = number(size);</div><div>Â  Â gap = number(gap);</div><div>Â  Â var workcanvas = document.createElement('canvas');</div><div>Â  Â workcanvas.width = workcanvas.height = (size+gap)*32;</div><div>Â  Â  Â var ctx = workcanvas.getContext('2d');</div><div>Â  Â  Â ctx.fillStyle = 'white';</div><div>Â  Â  Â ctx.fillRect(0,0,workcanvas.width,workcanvas.height);</div><div>Â  Â  Â ctx.fillStyle = 'black';</div><div>Â  Â  Â for (var i = 0; i &lt; bits.length; i++)</div><div>Â  Â  Â {</div><div>Â  Â  Â  if (bits[i]=='1') ctx.fillRect((size+gap)*(i%32), (size+gap)*Math.floor(i/32), size, size);</div><div>Â  Â  Â  }</div><div>Â  Â  Â return workcanvas.toDataURL('image/gif');</div><div>end rj_large_icon</div><br></div><div><br></div></field-part></card-part>
</stack-part>
